<!DOCTYPE html><!--n_OaHVlfcIetbxWrGFmpn--><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/b2aa10a3cb761d2f.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-cc328fc80d1d92f9.js"/><script src="/_next/static/chunks/eecf3333-be88052a8c8f8697.js" async=""></script><script src="/_next/static/chunks/4752-58b380405a07aaf7.js" async=""></script><script src="/_next/static/chunks/main-app-b80276bf8fc0d295.js" async=""></script><script src="/_next/static/chunks/6752-90baefdcb051c3c1.js" async=""></script><script src="/_next/static/chunks/2346-8f59889a5170c5da.js" async=""></script><script src="/_next/static/chunks/app/not-found-ffca88c5e945e772.js" async=""></script><script src="/_next/static/chunks/1909-ac3fe94adcf1a95e.js" async=""></script><script src="/_next/static/chunks/1278-1b71cee32080193b.js" async=""></script><script src="/_next/static/chunks/1399-c867858dd6d3be69.js" async=""></script><script src="/_next/static/chunks/app/%5Blocale%5D/layout-41f8cce3b90dae17.js" async=""></script><script src="/_next/static/chunks/8267-dd1b836d6e85c2aa.js" async=""></script><script src="/_next/static/chunks/4078-f6abe0d6c13465e4.js" async=""></script><script src="/_next/static/chunks/app/%5Blocale%5D/docs/%5Bslug%5D/page-1401b27bc56f3599.js" async=""></script><meta name="author" content="Metasequoia AI Studio"/><link rel="manifest" href="/manifest.json"/><meta name="theme-color" content="#000000"/><title>模型部署指南 | 文档中心</title><meta name="description" content="提供主流大模型的本地化部署方案，保障数据安全与隐私，支持自定义微调与性能优化"/><link rel="canonical" href="/en/docs/model-deployment"/><meta property="og:title" content="Metasequoia Studio"/><meta property="og:description" content="Providing customers with large model privatization deployment, application development and intelligent agent customization services"/><meta property="og:image" content="http://localhost:3000/favicon.jpg"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Metasequoia Studio"/><meta name="twitter:description" content="Providing customers with large model privatization deployment, application development and intelligent agent customization services"/><meta name="twitter:image" content="http://localhost:3000/favicon.jpg"/><link rel="icon" href="/favicon.jpg"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="antialiased"><div hidden=""><!--$--><!--/$--></div><html lang="en"><head></head><body class="antialiased"><div class="flex flex-col min-h-screen"><header class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-transparent"><div class="container mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center h-16 lg:h-20"><a class="flex items-center gap-3 group" href="/zh/"><div class="relative w-9 h-9 rounded-xl overflow-hidden shadow-card group-hover:shadow-glow transition-shadow duration-300"><img alt="Logo" draggable="false" loading="lazy" decoding="async" data-nimg="fill" class="object-cover" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/favicon.jpg"/></div><span class="text-lg font-bold gradient-text hidden sm:block">Metasequoia AI</span></a><nav class="hidden lg:flex items-center gap-1"><a class="relative px-4 py-2 text-sm font-medium transition-colors rounded-lg text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white" href="/zh/">Home</a><a class="relative px-4 py-2 text-sm font-medium transition-colors rounded-lg text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white" href="/zh/services/">Services</a><a class="relative px-4 py-2 text-sm font-medium transition-colors rounded-lg text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white" href="/zh/store/">Store</a><a class="relative px-4 py-2 text-sm font-medium transition-colors rounded-lg text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white" href="/zh/docs/">Docs</a><a class="relative px-4 py-2 text-sm font-medium transition-colors rounded-lg text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white" href="/zh/contact/">Contact</a></nav><div class="flex items-center gap-2"><button class="hidden lg:flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-all group"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"></path></svg><span class="text-slate-400 dark:text-slate-500 group-hover:text-slate-600 dark:group-hover:text-slate-300">Search</span><kbd class="hidden xl:inline-flex items-center gap-1 px-1.5 py-0.5 text-xs font-sans bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 rounded border border-slate-200 dark:border-slate-700"><span>⌘</span><span>K</span></kbd></button><button class="lg:hidden p-2 text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-all" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"></path></svg></button><div class="relative dropdown-container hidden sm:block"><button class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-all"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4 transition-transform "><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg></button></div><div class="relative dropdown-container hidden sm:block"><button class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-all"><span class="uppercase font-semibold text-xs">zh</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4 transition-transform "><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg></button></div><a class="hidden lg:flex items-center gap-2 px-4 py-2 bg-primary hover:bg-primary-600 text-white text-sm font-medium rounded-xl transition-all hover:shadow-glow btn-shine" href="/zh/contact/">Get Started</a><button class="lg:hidden p-2 text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-all" aria-label="Toggle menu"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg></button></div></div></div></header><main class="flex-grow"><div class="min-h-screen bg-slate-50 dark:bg-slate-900 pt-20"><header class="fixed top-16 lg:top-20 left-0 right-0 z-30 bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl border-b border-slate-200 dark:border-slate-700"><div class="container mx-auto px-4 sm:px-6 lg:px-8"><div class="flex items-center justify-between h-14"><a class="flex items-center gap-2 text-slate-500 hover:text-indigo-600 transition-colors group" href="/zh/docs/"><div class="w-8 h-8 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center group-hover:bg-indigo-100 dark:group-hover:bg-indigo-900/30 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg></div><span class="text-sm font-medium">返回文档列表</span></a><nav class="hidden sm:flex items-center gap-2 text-sm text-slate-500"><a class="hover:text-indigo-600 transition-colors" href="/zh/">首页</a><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"></path></svg><a class="hover:text-indigo-600 transition-colors" href="/zh/docs/">文档中心</a><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"></path></svg><span class="text-slate-900 dark:text-white font-medium">技术文档</span></nav></div></div></header><div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12"><div class="grid grid-cols-1 lg:grid-cols-12 gap-8"><aside class="hidden lg:block lg:col-span-3"><div class="sticky top-24 space-y-6"><div class="bg-white dark:bg-slate-800 rounded-2xl p-6 border border-slate-200 dark:border-slate-700 shadow-sm"><h3 class="text-sm font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4 text-indigo-500"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"></path></svg>文档导航</h3><nav class="space-y-4"><div><h4 class="text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2">开发指南</h4><ul class="space-y-1"><li><a class="block px-3 py-2 rounded-lg text-sm transition-colors text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700" href="/zh/docs/api-integration/">API 集成开发指南</a></li></ul></div><div><h4 class="text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2">技术文档</h4><ul class="space-y-1"><li><a class="block px-3 py-2 rounded-lg text-sm transition-colors text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700" href="/zh/docs/api-reference/">API 文档</a></li><li><a class="block px-3 py-2 rounded-lg text-sm transition-colors bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 font-medium" href="/zh/docs/model-deployment/">模型部署指南</a></li></ul></div><div><h4 class="text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2">帮助中心</h4><ul class="space-y-1"><li><a class="block px-3 py-2 rounded-lg text-sm transition-colors text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700" href="/zh/docs/faq/">常见问题</a></li></ul></div><div><h4 class="text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2">入门指南</h4><ul class="space-y-1"><li><a class="block px-3 py-2 rounded-lg text-sm transition-colors text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700" href="/zh/docs/introduction/">欢迎使用水杉智境工作室</a></li></ul></div><div><h4 class="text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2">进阶教程</h4><ul class="space-y-1"><li><a class="block px-3 py-2 rounded-lg text-sm transition-colors text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700" href="/zh/docs/knowledge-base/">本地知识库搭建指南</a></li><li><a class="block px-3 py-2 rounded-lg text-sm transition-colors text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700" href="/zh/docs/prompt-engineering/">提示词工程最佳实践</a></li><li><a class="block px-3 py-2 rounded-lg text-sm transition-colors text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700" href="/zh/docs/workflow/">AI 工作流搭建实战</a></li></ul></div><div><h4 class="text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2">其他</h4><ul class="space-y-1"><li><a class="block px-3 py-2 rounded-lg text-sm transition-colors text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700" href="/zh/docs/privacy-policy-en/">privacy-policy-en</a></li><li><a class="block px-3 py-2 rounded-lg text-sm transition-colors text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700" href="/zh/docs/privacy-policy/">privacy-policy</a></li><li><a class="block px-3 py-2 rounded-lg text-sm transition-colors text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700" href="/zh/docs/terms-of-service-en/">terms-of-service-en</a></li><li><a class="block px-3 py-2 rounded-lg text-sm transition-colors text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700" href="/zh/docs/terms-of-service/">terms-of-service</a></li></ul></div></nav></div></div></aside><main class="lg:col-span-7"><div class="mb-8" style="opacity:0;transform:translateY(20px)"><div class="flex items-center gap-3 mb-6"><span class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full text-sm font-medium"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"></path></svg>技术文档</span><span class="flex items-center gap-1.5 text-sm text-slate-500 dark:text-slate-400"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>更新于 <!-- -->2025-02-10</span></div><h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-slate-900 dark:text-white mb-6 leading-tight">模型部署指南</h1><p class="text-lg text-slate-600 dark:text-slate-400 leading-relaxed">提供主流大模型的本地化部署方案，保障数据安全与隐私，支持自定义微调与性能优化</p><div class="flex items-center gap-2 mt-4"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4 text-slate-400"><path stroke-linecap="round" stroke-linejoin="round" d="M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6Z"></path></svg><div class="flex flex-wrap gap-2"><span class="px-2.5 py-1 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full text-xs font-medium">模型部署</span><span class="px-2.5 py-1 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full text-xs font-medium">私有化</span><span class="px-2.5 py-1 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full text-xs font-medium">大模型</span><span class="px-2.5 py-1 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full text-xs font-medium">GPU</span><span class="px-2.5 py-1 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full text-xs font-medium">Docker</span><span class="px-2.5 py-1 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full text-xs font-medium">Kubernetes</span></div></div></div><article class="bg-white dark:bg-slate-800 rounded-2xl p-8 lg:p-10 border border-slate-200 dark:border-slate-700 shadow-sm" style="opacity:0;transform:translateY(20px)"><div class="prose dark:prose-invert max-w-none "><h1 id="模型部署指南" class="text-3xl font-bold mb-8 text-slate-900 dark:text-white scroll-mt-24"><a href="#模型部署指南" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">模型部署指南</a></h1>
<h2 id="概述" class="text-2xl font-semibold mt-12 mb-4 text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-3 scroll-mt-24"><a href="#概述" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">概述</a></h2>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">我们提供主流大模型的本地化部署方案，帮助企业在自有基础设施上运行大语言模型，保障数据安全与隐私，支持自定义微调与性能优化。本指南涵盖从单机部署到分布式集群的完整方案。</p>
<h2 id="支持的模型" class="text-2xl font-semibold mt-12 mb-4 text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-3 scroll-mt-24"><a href="#支持的模型" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">支持的模型</a></h2>
<h3 id="开源模型" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#开源模型" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">开源模型</a></h3>
<div class="overflow-x-auto my-6"><table class="w-full border-collapse"><thead class="bg-slate-50 dark:bg-slate-800"><tr><th class="border border-slate-200 dark:border-slate-700 px-4 py-2 text-left font-semibold">模型</th><th class="border border-slate-200 dark:border-slate-700 px-4 py-2 text-left font-semibold">参数量</th><th class="border border-slate-200 dark:border-slate-700 px-4 py-2 text-left font-semibold">显存需求</th><th class="border border-slate-200 dark:border-slate-700 px-4 py-2 text-left font-semibold">推荐用途</th><th class="border border-slate-200 dark:border-slate-700 px-4 py-2 text-left font-semibold">特点</th></tr></thead><tbody><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2"><strong class="text-slate-900 dark:text-white font-semibold">DeepSeek</strong></td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">7B-67B</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">16GB-140GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">代码生成、数学推理</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">开源最强代码模型，支持 128K 长上下文</td></tr><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2"><strong class="text-slate-900 dark:text-white font-semibold">Qwen (通义千问)</strong></td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">7B-72B</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">16GB-160GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">中文场景、代码生成</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">中文理解优秀，支持 function call</td></tr><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2"><strong class="text-slate-900 dark:text-white font-semibold">LLaMA 2/3</strong></td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">7B-70B</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">16GB-160GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">通用对话、文本生成</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">生态丰富，社区支持广泛</td></tr><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2"><strong class="text-slate-900 dark:text-white font-semibold">Yi (零一万物)</strong></td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">6B-34B</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">14GB-80GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">中英文混合场景</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">中文表现优异，支持长文本</td></tr><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2"><strong class="text-slate-900 dark:text-white font-semibold">ChatGLM3</strong></td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">6B</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">14GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">中文对话、轻量级部署</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">低资源占用，适合边缘部署</td></tr><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2"><strong class="text-slate-900 dark:text-white font-semibold">Baichuan2</strong></td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">7B-13B</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">16GB-28GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">中文场景、企业应用</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">商用友好，中文知识丰富</td></tr><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2"><strong class="text-slate-900 dark:text-white font-semibold">Mistral</strong></td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">7B-8x7B</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">16GB-90GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">多语言推理</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">MoE 架构，推理效率高</td></tr></tbody></table></div>
<h4 id="特色模型详解"><a href="#特色模型详解" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">特色模型详解</a></h4>
<h5 id="deepseek-系列"><a href="#deepseek-系列" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">DeepSeek 系列</a></h5>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">DeepSeek 是目前最强的开源代码大模型，特别适合开发场景：</p>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">DeepSeek-Coder-33B</strong>: 代码生成能力接近 GPT-4</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">DeepSeek-V2</strong>: 采用 MLA 架构，推理成本低，支持 128K 上下文</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">DeepSeek-Math</strong>: 数学推理专项优化，竞赛级表现</li>
</ul>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># DeepSeek 快速部署</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">docker</span><span> pull m9ai/deepseek-coder-33b:latest
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">docker</span><span> run -d --gpus all -p </span><span class="token" style="color:hsl(35, 99%, 36%)">8000</span><span>:8000 m9ai/deepseek-coder-33b:latest</span></code></pre></div></div></pre>
<h5 id="kimi-系列-moonshot"><a href="#kimi-系列-moonshot" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">Kimi 系列 (Moonshot)</a></h5>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">Kimi 以超长上下文窗口著称，适合文档分析场景：</p>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">Kimi-V1</strong>: 支持 200K 超长上下文</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">Kimi-V1.5</strong>: 多模态能力，支持图像理解</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">适用场景</strong>: 长文档摘要、法律合同分析、论文研读</li>
</ul>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># Kimi 模型部署（需申请授权）</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">docker</span><span> run -d </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span>  -e </span><span class="token assign-left" style="color:hsl(221, 87%, 60%)">MOONSHOT_API_KEY</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span>your_key </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>  -p </span><span class="token" style="color:hsl(35, 99%, 36%)">8000</span><span>:8000 </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span>  m9ai/kimi-v1:latest</code></pre></div></div></pre>
<h3 id="商用模型需授权" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#商用模型需授权" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">商用模型（需授权）</a></h3>
<div class="overflow-x-auto my-6"><table class="w-full border-collapse"><thead class="bg-slate-50 dark:bg-slate-800"><tr><th class="border border-slate-200 dark:border-slate-700 px-4 py-2 text-left font-semibold">模型</th><th class="border border-slate-200 dark:border-slate-700 px-4 py-2 text-left font-semibold">部署方式</th><th class="border border-slate-200 dark:border-slate-700 px-4 py-2 text-left font-semibold">适用场景</th></tr></thead><tbody><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">GPT 系列</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">Azure OpenAI 私有化</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">通用对话、复杂推理</td></tr><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">文心一言企业版</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">百度智能云私有化</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">中文企业应用</td></tr><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">讯飞星火企业版</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">讯飞云平台</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">语音识别、教育场景</td></tr><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2"><strong class="text-slate-900 dark:text-white font-semibold">Kimi</strong></td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">月之暗面私有化部署</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">长文档分析、法律金融</td></tr></tbody></table></div>
<hr class="border-slate-200 dark:border-slate-700 my-8"/>
<h2 id="模型选型指南" class="text-2xl font-semibold mt-12 mb-4 text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-3 scroll-mt-24"><a href="#模型选型指南" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">模型选型指南</a></h2>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">根据不同业务场景选择合适的模型：</p>
<h3 id="代码开发场景" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#代码开发场景" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">代码开发场景</a></h3>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4"><strong class="text-slate-900 dark:text-white font-semibold">首选</strong>: DeepSeek-Coder-33B</p>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">代码生成准确率最高</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">支持 128K 长代码文件分析</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">精通 Python、Java、JavaScript 等主流语言</li>
</ul>
<h3 id="中文对话场景" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#中文对话场景" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">中文对话场景</a></h3>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4"><strong class="text-slate-900 dark:text-white font-semibold">首选</strong>: Qwen2.5-72B</p>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">中文理解能力业界领先</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">支持 function call 工具调用</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">中文知识库丰富</li>
</ul>
<h3 id="长文档分析场景" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#长文档分析场景" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">长文档分析场景</a></h3>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4"><strong class="text-slate-900 dark:text-white font-semibold">首选</strong>: Kimi-V1</p>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">200K 超长上下文窗口</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">适合论文、合同、报告分析</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">信息提取准确率高</li>
</ul>
<h3 id="轻量级部署场景" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#轻量级部署场景" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">轻量级部署场景</a></h3>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4"><strong class="text-slate-900 dark:text-white font-semibold">首选</strong>: ChatGLM3-6B 或 DeepSeek-7B</p>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">单张消费级显卡可运行</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">响应速度快</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">适合边缘设备部署</li>
</ul>
<h2 id="系统要求" class="text-2xl font-semibold mt-12 mb-4 text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-3 scroll-mt-24"><a href="#系统要求" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">系统要求</a></h2>
<h3 id="最低配置7b-模型" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#最低配置7b-模型" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">最低配置（7B 模型）</a></h3>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">CPU</strong>: 8 核及以上</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">内存</strong>: 32GB 及以上</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">存储</strong>: 100GB SSD 及以上</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">GPU</strong>: NVIDIA RTX 3090 / A10 / T4（24GB 显存）</li>
</ul>
<h3 id="推荐配置13b-70b-模型" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#推荐配置13b-70b-模型" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">推荐配置（13B-70B 模型）</a></h3>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">CPU</strong>: 16 核及以上</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">内存</strong>: 64GB-256GB</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">存储</strong>: 500GB NVMe SSD</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">GPU</strong>:<!-- -->
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">13B 模型: A100 40GB 或 RTX 4090</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">70B 模型: 2x A100 80GB 或 4x A10</li>
</ul>
</li>
</ul>
<h3 id="软件环境" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#软件环境" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">软件环境</a></h3>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">操作系统</strong>: Ubuntu 20.04/22.04 LTS, CentOS 7/8</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">CUDA</strong>: 11.8 或 12.1</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">Docker</strong>: 20.10+（推荐）</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">Python</strong>: 3.9-3.11</li>
</ul>
<h2 id="部署方式" class="text-2xl font-semibold mt-12 mb-4 text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-3 scroll-mt-24"><a href="#部署方式" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">部署方式</a></h2>
<h3 id="方式一docker-快速部署推荐" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#方式一docker-快速部署推荐" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">方式一：Docker 快速部署（推荐）</a></h3>
<h4 id="1-安装-docker-和-nvidia-docker"><a href="#1-安装-docker-和-nvidia-docker" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">1. 安装 Docker 和 NVIDIA Docker</a></h4>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 安装 Docker</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">curl</span><span> -fsSL https://get.docker.com </span><span class="token" style="color:hsl(221, 87%, 60%)">|</span><span> </span><span class="token" style="color:hsl(221, 87%, 60%)">sh</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 安装 NVIDIA Container Toolkit</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span></span><span class="token assign-left" style="color:hsl(221, 87%, 60%)">distribution</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(221, 87%, 60%)">$(</span><span class="token" style="color:hsl(35, 99%, 36%)">.</span><span class="token" style="color:hsl(221, 87%, 60%)"> /etc/os-release</span><span class="token" style="color:hsl(230, 8%, 24%)">;</span><span class="token" style="color:hsl(35, 99%, 36%)">echo</span><span class="token" style="color:hsl(221, 87%, 60%)"> $ID$VERSION_ID</span><span class="token" style="color:hsl(221, 87%, 60%)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">curl</span><span> -s -L https://nvidia.github.io/nvidia-docker/gpgkey </span><span class="token" style="color:hsl(221, 87%, 60%)">|</span><span> </span><span class="token" style="color:hsl(221, 87%, 60%)">sudo</span><span> apt-key </span><span class="token" style="color:hsl(221, 87%, 60%)">add</span><span> -
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">curl</span><span> -s -L https://nvidia.github.io/nvidia-docker/</span><span class="token" style="color:hsl(221, 87%, 60%)">$distribution</span><span>/nvidia-docker.list </span><span class="token" style="color:hsl(221, 87%, 60%)">|</span><span> </span><span class="token" style="color:hsl(221, 87%, 60%)">sudo</span><span> </span><span class="token" style="color:hsl(221, 87%, 60%)">tee</span><span> /etc/apt/sources.list.d/nvidia-docker.list
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">9</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">sudo</span><span> </span><span class="token" style="color:hsl(221, 87%, 60%)">apt-get</span><span> update
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">10</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">sudo</span><span> </span><span class="token" style="color:hsl(221, 87%, 60%)">apt-get</span><span> </span><span class="token" style="color:hsl(221, 87%, 60%)">install</span><span> -y nvidia-container-toolkit
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">11</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">sudo</span><span> systemctl restart </span><span class="token" style="color:hsl(221, 87%, 60%)">docker</span></code></pre></div></div></pre>
<h4 id="2-拉取模型镜像"><a href="#2-拉取模型镜像" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">2. 拉取模型镜像</a></h4>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># DeepSeek Coder 33B（推荐）</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">docker</span><span> pull m9ai/deepseek-coder-33b:latest
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 通义千问 72B</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">docker</span><span> pull m9ai/qwen2.5-72b:latest
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># LLaMA 2 7B</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">docker</span><span> pull m9ai/llama2-7b:latest</span></code></pre></div></div></pre>
<h4 id="3-启动容器"><a href="#3-启动容器" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">3. 启动容器</a></h4>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(221, 87%, 60%)">docker</span><span> run -d </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span>  --name llm-server </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span>  --gpus all </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>  -p </span><span class="token" style="color:hsl(35, 99%, 36%)">8000</span><span>:8000 </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span>  -v /data/models:/models </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span><span>  -e </span><span class="token assign-left" style="color:hsl(221, 87%, 60%)">MODEL_PATH</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span>/models/llama-2-7b </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span><span>  -e </span><span class="token assign-left" style="color:hsl(221, 87%, 60%)">CUDA_VISIBLE_DEVICES</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">0</span><span> </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span>  m9ai/llama2-7b:latest</code></pre></div></div></pre>
<h4 id="4-验证部署"><a href="#4-验证部署" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">4. 验证部署</a></h4>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(221, 87%, 60%)">curl</span><span> http://localhost:8000/v1/models
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 测试对话（DeepSeek 示例）</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">curl</span><span> -X POST http://localhost:8000/v1/chat/completions </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span>  -H </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;Content-Type: application/json&quot;</span><span> </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span><span>  -d </span><span class="token" style="color:hsl(119, 34%, 47%)">&#x27;{
</span><span class="token" style="color:hsl(119, 34%, 47%)"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span>    &quot;model&quot;: &quot;deepseek-coder-33b&quot;,
</span><span class="token" style="color:hsl(119, 34%, 47%)"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span>    &quot;messages&quot;: [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;用 Python 写一个快速排序算法&quot;}]
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">9</span><span class="token" style="color:hsl(119, 34%, 47%)">  }&#x27;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">10</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">11</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 测试长文本（Kimi 示例）</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">12</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">curl</span><span> -X POST http://localhost:8000/v1/chat/completions </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">13</span><span>  -H </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;Content-Type: application/json&quot;</span><span> </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">14</span><span>  -d </span><span class="token" style="color:hsl(119, 34%, 47%)">&#x27;{
</span><span class="token" style="color:hsl(119, 34%, 47%)"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">15</span>    &quot;model&quot;: &quot;kimi-v1&quot;,
</span><span class="token" style="color:hsl(119, 34%, 47%)"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">16</span>    &quot;messages&quot;: [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;请总结这篇论文的主要内容...&quot;}]
</span><span class="token" style="color:hsl(119, 34%, 47%)"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">17</span>  }&#x27;</span></code></pre></div></div></pre>
<h3 id="方式二kubernetes-集群部署" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#方式二kubernetes-集群部署" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">方式二：Kubernetes 集群部署</a></h3>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">适用于大规模生产环境，支持自动扩缩容。</p>
<h4 id="1-准备-kubernetes-集群"><a href="#1-准备-kubernetes-集群" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">1. 准备 Kubernetes 集群</a></h4>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">确保集群已配置 NVIDIA GPU 设备插件：</p>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span>kubectl apply -f https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/v0.14.0/nvidia-device-plugin.yml</span></code></pre></div></div></pre>
<h4 id="2-部署模型服务"><a href="#2-部署模型服务" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">2. 部署模型服务</a></h4>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">yaml</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-yaml" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># model-deployment.yaml</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span></span><span class="token key" style="color:hsl(35, 99%, 36%)">apiVersion</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> apps/v1
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span></span><span class="token key" style="color:hsl(35, 99%, 36%)">kind</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> Deployment
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span></span><span class="token key" style="color:hsl(35, 99%, 36%)">metadata</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">name</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> llm</span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span>deployment
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span><span></span><span class="token key" style="color:hsl(35, 99%, 36%)">spec</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">replicas</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(35, 99%, 36%)">2</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">selector</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">9</span><span>    </span><span class="token key" style="color:hsl(35, 99%, 36%)">matchLabels</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">10</span><span>      </span><span class="token key" style="color:hsl(35, 99%, 36%)">app</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> llm</span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span>server
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">11</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">template</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">12</span><span>    </span><span class="token key" style="color:hsl(35, 99%, 36%)">metadata</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">13</span><span>      </span><span class="token key" style="color:hsl(35, 99%, 36%)">labels</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">14</span><span>        </span><span class="token key" style="color:hsl(35, 99%, 36%)">app</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> llm</span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span>server
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">15</span><span>    </span><span class="token key" style="color:hsl(35, 99%, 36%)">spec</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">16</span><span>      </span><span class="token key" style="color:hsl(35, 99%, 36%)">containers</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">17</span><span>      </span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span> </span><span class="token key" style="color:hsl(35, 99%, 36%)">name</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> llm
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">18</span><span>        </span><span class="token key" style="color:hsl(35, 99%, 36%)">image</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> m9ai/llama2</span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span>7b</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>latest
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">19</span><span>        </span><span class="token key" style="color:hsl(35, 99%, 36%)">resources</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">20</span><span>          </span><span class="token key" style="color:hsl(35, 99%, 36%)">limits</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">21</span><span>            </span><span class="token key" style="color:hsl(35, 99%, 36%)">nvidia.com/gpu</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(35, 99%, 36%)">1</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">22</span><span>        </span><span class="token key" style="color:hsl(35, 99%, 36%)">ports</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">23</span><span>        </span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span> </span><span class="token key" style="color:hsl(35, 99%, 36%)">containerPort</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(35, 99%, 36%)">8000</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">24</span><span>        </span><span class="token key" style="color:hsl(35, 99%, 36%)">env</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">25</span><span>        </span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span> </span><span class="token key" style="color:hsl(35, 99%, 36%)">name</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> MODEL_PATH
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">26</span><span>          </span><span class="token key" style="color:hsl(35, 99%, 36%)">value</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;/models/llama-2-7b&quot;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">27</span><span>        </span><span class="token key" style="color:hsl(35, 99%, 36%)">volumeMounts</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">28</span><span>        </span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span> </span><span class="token key" style="color:hsl(35, 99%, 36%)">name</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> model</span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span>storage
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">29</span><span>          </span><span class="token key" style="color:hsl(35, 99%, 36%)">mountPath</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> /models
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">30</span><span>      </span><span class="token key" style="color:hsl(35, 99%, 36%)">volumes</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">31</span><span>      </span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span> </span><span class="token key" style="color:hsl(35, 99%, 36%)">name</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> model</span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span>storage
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">32</span><span>        </span><span class="token key" style="color:hsl(35, 99%, 36%)">persistentVolumeClaim</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">33</span><span>          </span><span class="token key" style="color:hsl(35, 99%, 36%)">claimName</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> model</span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span>pvc
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">34</span><span></span><span class="token" style="color:hsl(230, 8%, 24%)">---</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">35</span><span></span><span class="token key" style="color:hsl(35, 99%, 36%)">apiVersion</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> v1
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">36</span><span></span><span class="token key" style="color:hsl(35, 99%, 36%)">kind</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> Service
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">37</span><span></span><span class="token key" style="color:hsl(35, 99%, 36%)">metadata</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">38</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">name</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> llm</span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span>service
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">39</span><span></span><span class="token key" style="color:hsl(35, 99%, 36%)">spec</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">40</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">selector</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">41</span><span>    </span><span class="token key" style="color:hsl(35, 99%, 36%)">app</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> llm</span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span>server
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">42</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">ports</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">43</span><span>  </span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span> </span><span class="token key" style="color:hsl(35, 99%, 36%)">port</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(35, 99%, 36%)">8000</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">44</span><span>    </span><span class="token key" style="color:hsl(35, 99%, 36%)">targetPort</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(35, 99%, 36%)">8000</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">45</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">type</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> LoadBalancer</span></code></pre></div></div></pre>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">部署：</p>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span>kubectl apply -f model-deployment.yaml</span></code></pre></div></div></pre>
<h3 id="方式三裸机部署" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#方式三裸机部署" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">方式三：裸机部署</a></h3>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">适用于需要深度定制的场景。</p>
<h4 id="1-安装依赖"><a href="#1-安装依赖" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">1. 安装依赖</a></h4>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 安装 Python 依赖</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span>pip </span><span class="token" style="color:hsl(221, 87%, 60%)">install</span><span> torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span>pip </span><span class="token" style="color:hsl(221, 87%, 60%)">install</span><span> transformers accelerate bitsandbytes
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>pip </span><span class="token" style="color:hsl(221, 87%, 60%)">install</span><span> vllm  </span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 高性能推理引擎</span></code></pre></div></div></pre>
<h4 id="2-下载模型"><a href="#2-下载模型" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">2. 下载模型</a></h4>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">python</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-python" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(301, 63%, 40%)">from</span><span> huggingface_hub </span><span class="token" style="color:hsl(301, 63%, 40%)">import</span><span> snapshot_download
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 下载模型到本地</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>model_path </span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span> snapshot_download</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span>    repo_id</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;meta-llama/Llama-2-7b-chat-hf&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span><span>    local_dir</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;./models/llama-2-7b&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span><span>    token</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;your_huggingface_token&quot;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span><span></span><span class="token" style="color:hsl(230, 8%, 24%)">)</span></code></pre></div></div></pre>
<h4 id="3-启动服务使用-vllm"><a href="#3-启动服务使用-vllm" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">3. 启动服务（使用 vLLM）</a></h4>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">python</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-python" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(301, 63%, 40%)">from</span><span> vllm </span><span class="token" style="color:hsl(301, 63%, 40%)">import</span><span> LLM</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span> SamplingParams
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 初始化模型</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>llm </span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span> LLM</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span>    model</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;./models/llama-2-7b&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span><span>    tensor_parallel_size</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">1</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>  </span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># GPU 数量</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span><span>    gpu_memory_utilization</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">0.9</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span><span>    max_model_len</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">4096</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">9</span><span></span><span class="token" style="color:hsl(230, 8%, 24%)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">10</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">11</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 推理示例</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">12</span><span>sampling_params </span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span> SamplingParams</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>temperature</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">0.7</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span> max_tokens</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">512</span><span class="token" style="color:hsl(230, 8%, 24%)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">13</span><span>prompts </span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span> </span><span class="token" style="color:hsl(230, 8%, 24%)">[</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;你好，请介绍一下自己&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">]</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">14</span><span>outputs </span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span> llm</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>generate</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>prompts</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span> sampling_params</span><span class="token" style="color:hsl(230, 8%, 24%)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">15</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">16</span><span></span><span class="token" style="color:hsl(301, 63%, 40%)">for</span><span> output </span><span class="token" style="color:hsl(301, 63%, 40%)">in</span><span> outputs</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">17</span><span>    </span><span class="token" style="color:hsl(301, 63%, 40%)">print</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>output</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>outputs</span><span class="token" style="color:hsl(230, 8%, 24%)">[</span><span class="token" style="color:hsl(35, 99%, 36%)">0</span><span class="token" style="color:hsl(230, 8%, 24%)">]</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>text</span><span class="token" style="color:hsl(230, 8%, 24%)">)</span></code></pre></div></div></pre>
<h2 id="性能优化" class="text-2xl font-semibold mt-12 mb-4 text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-3 scroll-mt-24"><a href="#性能优化" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">性能优化</a></h2>
<h3 id="量化技术" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#量化技术" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">量化技术</a></h3>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">使用 4-bit 或 8-bit 量化可大幅降低显存占用：</p>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">python</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-python" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(301, 63%, 40%)">from</span><span> transformers </span><span class="token" style="color:hsl(301, 63%, 40%)">import</span><span> AutoModelForCausalLM</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span> BitsAndBytesConfig
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 4-bit 量化配置</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>quantization_config </span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span> BitsAndBytesConfig</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span>    load_in_4bit</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">True</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span><span>    bnb_4bit_compute_dtype</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span>torch</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>float16</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span><span>    bnb_4bit_quant_type</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;nf4&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span><span>    bnb_4bit_use_double_quant</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">True</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">9</span><span></span><span class="token" style="color:hsl(230, 8%, 24%)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">10</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">11</span><span>model </span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span> AutoModelForCausalLM</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>from_pretrained</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">12</span><span>    </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;model_path&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">13</span><span>    quantization_config</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span>quantization_config</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">14</span><span>    device_map</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;auto&quot;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">15</span><span></span><span class="token" style="color:hsl(230, 8%, 24%)">)</span></code></pre></div></div></pre>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4"><strong class="text-slate-900 dark:text-white font-semibold">量化效果对比：</strong></p>
<div class="overflow-x-auto my-6"><table class="w-full border-collapse"><thead class="bg-slate-50 dark:bg-slate-800"><tr><th class="border border-slate-200 dark:border-slate-700 px-4 py-2 text-left font-semibold">模型</th><th class="border border-slate-200 dark:border-slate-700 px-4 py-2 text-left font-semibold">原始显存</th><th class="border border-slate-200 dark:border-slate-700 px-4 py-2 text-left font-semibold">8-bit 显存</th><th class="border border-slate-200 dark:border-slate-700 px-4 py-2 text-left font-semibold">4-bit 显存</th><th class="border border-slate-200 dark:border-slate-700 px-4 py-2 text-left font-semibold">性能损失</th></tr></thead><tbody><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">DeepSeek-Coder-33B</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">66GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">38GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">22GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">&lt;3%</td></tr><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">Qwen2.5-72B</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">144GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">82GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">48GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">&lt;4%</td></tr><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">LLaMA2-7B</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">14GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">8GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">5GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">&lt;3%</td></tr><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">LLaMA2-13B</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">26GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">15GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">9GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">&lt;5%</td></tr><tr><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">LLaMA2-70B</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">140GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">80GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">48GB</td><td class="border border-slate-200 dark:border-slate-700 px-4 py-2">&lt;5%</td></tr></tbody></table></div>
<h3 id="推理加速" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#推理加速" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">推理加速</a></h3>
<h4 id="vllm-加速"><a href="#vllm-加速" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">vLLM 加速</a></h4>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">vLLM 使用 PagedAttention 算法，可提升 2-4 倍吞吐量：</p>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span>python -m vllm.entrypoints.openai.api_server </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span>  --model /models/llama-2-7b </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span>  --tensor-parallel-size </span><span class="token" style="color:hsl(35, 99%, 36%)">1</span><span> </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>  --max-num-seqs </span><span class="token" style="color:hsl(35, 99%, 36%)">256</span><span> </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span>  --max-model-len </span><span class="token" style="color:hsl(35, 99%, 36%)">4096</span></code></pre></div></div></pre>
<h4 id="tensorrt-llm-加速"><a href="#tensorrt-llm-加速" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">TensorRT-LLM 加速</a></h4>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">NVIDIA TensorRT-LLM 可提供极致性能：</p>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 构建 TensorRT 引擎</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span>trtllm-build --checkpoint_dir ./model </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span>             --output_dir ./trt_engines/llama-7b </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span>             --gemm_plugin float16
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 运行推理</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span><span>python3 run.py --engine_dir</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span>./trt_engines/llama-7b </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span><span>               --max_output_len</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">512</span></code></pre></div></div></pre>
<h3 id="缓存策略" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#缓存策略" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">缓存策略</a></h3>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">启用 KV Cache 可加速多轮对话：</p>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">python</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-python" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># vLLM 自动管理 KV Cache</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span>llm </span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span> LLM</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span>    model</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;model_path&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>    enable_prefix_caching</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">True</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>  </span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 前缀缓存</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span>    max_num_batched_tokens</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">4096</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span><span></span><span class="token" style="color:hsl(230, 8%, 24%)">)</span></code></pre></div></div></pre>
<h2 id="api-使用指南" class="text-2xl font-semibold mt-12 mb-4 text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-3 scroll-mt-24"><a href="#api-使用指南" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">API 使用指南</a></h2>
<h3 id="openai-兼容接口" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#openai-兼容接口" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">OpenAI 兼容接口</a></h3>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">我们的部署方案提供与 OpenAI API 兼容的接口：</p>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">python</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-python" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(301, 63%, 40%)">from</span><span> openai </span><span class="token" style="color:hsl(301, 63%, 40%)">import</span><span> OpenAI
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span>client </span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span> OpenAI</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>    base_url</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;http://localhost:8000/v1&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span>    api_key</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;dummy&quot;</span><span>  </span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 本地部署可不设置</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span><span></span><span class="token" style="color:hsl(230, 8%, 24%)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># DeepSeek 代码生成示例</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">9</span><span>response </span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span> client</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>chat</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>completions</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>create</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">10</span><span>    model</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;deepseek-coder-33b&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">11</span><span>    messages</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(230, 8%, 24%)">[</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">12</span><span>        </span><span class="token" style="color:hsl(230, 8%, 24%)">{</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;role&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;system&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;content&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;你是一个专业程序员&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">}</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">13</span><span>        </span><span class="token" style="color:hsl(230, 8%, 24%)">{</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;role&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;user&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;content&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;用 Python 实现一个 LRU 缓存&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">14</span><span>    </span><span class="token" style="color:hsl(230, 8%, 24%)">]</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">15</span><span>    temperature</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">0.3</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">16</span><span>    max_tokens</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">2048</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">17</span><span></span><span class="token" style="color:hsl(230, 8%, 24%)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">18</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">19</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># Kimi 长文档分析示例</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">20</span><span>response </span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span> client</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>chat</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>completions</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>create</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">21</span><span>    model</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;kimi-v1&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">22</span><span>    messages</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(230, 8%, 24%)">[</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">23</span><span>        </span><span class="token" style="color:hsl(230, 8%, 24%)">{</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;role&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;user&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;content&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;请分析这份 50 页的报告，提取核心观点...&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">24</span><span>    </span><span class="token" style="color:hsl(230, 8%, 24%)">]</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">25</span><span>    temperature</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">0.5</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">26</span><span>    max_tokens</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">4096</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">27</span><span></span><span class="token" style="color:hsl(230, 8%, 24%)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">28</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">29</span><span></span><span class="token" style="color:hsl(301, 63%, 40%)">print</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>response</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>choices</span><span class="token" style="color:hsl(230, 8%, 24%)">[</span><span class="token" style="color:hsl(35, 99%, 36%)">0</span><span class="token" style="color:hsl(230, 8%, 24%)">]</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>message</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>content</span><span class="token" style="color:hsl(230, 8%, 24%)">)</span></code></pre></div></div></pre>
<h3 id="流式响应" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#流式响应" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">流式响应</a></h3>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">python</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-python" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span>stream </span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span> client</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>chat</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>completions</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>create</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span>    model</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;llama-2-7b&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span>    messages</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(230, 8%, 24%)">[</span><span class="token" style="color:hsl(230, 8%, 24%)">{</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;role&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;user&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;content&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;写一首诗&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">}</span><span class="token" style="color:hsl(230, 8%, 24%)">]</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>    stream</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">True</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span></span><span class="token" style="color:hsl(230, 8%, 24%)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span><span></span><span class="token" style="color:hsl(301, 63%, 40%)">for</span><span> chunk </span><span class="token" style="color:hsl(301, 63%, 40%)">in</span><span> stream</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span><span>    </span><span class="token" style="color:hsl(301, 63%, 40%)">if</span><span> chunk</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>choices</span><span class="token" style="color:hsl(230, 8%, 24%)">[</span><span class="token" style="color:hsl(35, 99%, 36%)">0</span><span class="token" style="color:hsl(230, 8%, 24%)">]</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>delta</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>content</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">9</span><span>        </span><span class="token" style="color:hsl(301, 63%, 40%)">print</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>chunk</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>choices</span><span class="token" style="color:hsl(230, 8%, 24%)">[</span><span class="token" style="color:hsl(35, 99%, 36%)">0</span><span class="token" style="color:hsl(230, 8%, 24%)">]</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>delta</span><span class="token" style="color:hsl(230, 8%, 24%)">.</span><span>content</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span> end</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">)</span></code></pre></div></div></pre>
<h2 id="监控与日志" class="text-2xl font-semibold mt-12 mb-4 text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-3 scroll-mt-24"><a href="#监控与日志" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">监控与日志</a></h2>
<h3 id="启用-prometheus-监控" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#启用-prometheus-监控" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">启用 Prometheus 监控</a></h3>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(221, 87%, 60%)">docker</span><span> run -d </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span>  --name llm-monitor </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span>  -p </span><span class="token" style="color:hsl(35, 99%, 36%)">8000</span><span>:8000 </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>  -e </span><span class="token assign-left" style="color:hsl(221, 87%, 60%)">ENABLE_METRICS</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span>true </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span>  -e </span><span class="token assign-left" style="color:hsl(221, 87%, 60%)">PROMETHEUS_PORT</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">8080</span><span> </span><span class="token" style="color:hsl(230, 8%, 24%)">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span>  m9ai/llama2-7b:latest</code></pre></div></div></pre>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">监控指标：</p>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 text-rose-600 dark:text-rose-400 rounded text-sm font-mono">vllm:gpu_cache_usage_perc</code> - GPU 缓存使用率</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 text-rose-600 dark:text-rose-400 rounded text-sm font-mono">vllm:num_requests_running</code> - 正在处理的请求数</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 text-rose-600 dark:text-rose-400 rounded text-sm font-mono">vllm:time_to_first_token_seconds</code> - 首 token 延迟</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 text-rose-600 dark:text-rose-400 rounded text-sm font-mono">vllm:time_per_output_token_seconds</code> - 每个 token 生成时间</li>
</ul>
<h3 id="日志配置" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#日志配置" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">日志配置</a></h3>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">yaml</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-yaml" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># logging.yaml</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span></span><span class="token key" style="color:hsl(35, 99%, 36%)">logging</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">level</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> INFO
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">format</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;%(asctime)s - %(name)s - %(levelname)s - %(message)s&quot;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">handlers</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span><span>    </span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span> </span><span class="token key" style="color:hsl(35, 99%, 36%)">file</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> /var/log/llm</span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span>server.log
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span><span>    </span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span> console</span></code></pre></div></div></pre>
<h2 id="安全与合规" class="text-2xl font-semibold mt-12 mb-4 text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-3 scroll-mt-24"><a href="#安全与合规" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">安全与合规</a></h2>
<h3 id="网络安全" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#网络安全" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">网络安全</a></h3>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">使用 HTTPS/TLS 加密通信</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">配置防火墙规则，限制访问 IP</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">启用 API 密钥认证</li>
</ul>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 生成 API 密钥</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span></span><span class="token" style="color:hsl(35, 99%, 36%)">export</span><span> </span><span class="token assign-left" style="color:hsl(221, 87%, 60%)">API_KEY</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(221, 87%, 60%)">$(</span><span class="token" style="color:hsl(221, 87%, 60%)">openssl rand -hex </span><span class="token" style="color:hsl(35, 99%, 36%)">32</span><span class="token" style="color:hsl(221, 87%, 60%)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 启动时启用认证</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">docker</span><span> run -e </span><span class="token assign-left" style="color:hsl(221, 87%, 60%)">API_KEY</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(221, 87%, 60%)">$API_KEY</span><span> m9ai/llama2-7b:latest</span></code></pre></div></div></pre>
<h3 id="数据保护" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#数据保护" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">数据保护</a></h3>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">所有数据保留在本地，不传输到外部</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">支持磁盘加密</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">定期安全审计</li>
</ul>
<h2 id="故障排查" class="text-2xl font-semibold mt-12 mb-4 text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-3 scroll-mt-24"><a href="#故障排查" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">故障排查</a></h2>
<h3 id="常见问题" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#常见问题" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">常见问题</a></h3>
<h4 id="1-cuda-out-of-memory"><a href="#1-cuda-out-of-memory" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">1. CUDA Out of Memory</a></h4>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4"><strong class="text-slate-900 dark:text-white font-semibold">原因</strong>：显存不足
<strong class="text-slate-900 dark:text-white font-semibold">解决</strong>：</p>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">启用量化（4-bit/8-bit）</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">减小 <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 text-rose-600 dark:text-rose-400 rounded text-sm font-mono">max_model_len</code></li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">使用 ZeRO  offload 到 CPU</li>
</ul>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">python</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-python" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span>llm </span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span> LLM</span><span class="token" style="color:hsl(230, 8%, 24%)">(</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span>    model</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;model_path&quot;</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span>    gpu_memory_utilization</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">0.85</span><span class="token" style="color:hsl(230, 8%, 24%)">,</span><span>  </span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 降低显存占用比例</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>    max_model_len</span><span class="token" style="color:hsl(221, 87%, 60%)">=</span><span class="token" style="color:hsl(35, 99%, 36%)">2048</span><span>  </span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 减小最大序列长度</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span></span><span class="token" style="color:hsl(230, 8%, 24%)">)</span></code></pre></div></div></pre>
<h4 id="2-模型加载缓慢"><a href="#2-模型加载缓慢" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">2. 模型加载缓慢</a></h4>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4"><strong class="text-slate-900 dark:text-white font-semibold">原因</strong>：磁盘 I/O 瓶颈
<strong class="text-slate-900 dark:text-white font-semibold">解决</strong>：</p>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">使用 NVMe SSD</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">预加载模型到内存</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">启用模型并行</li>
</ul>
<h4 id="3-推理速度慢"><a href="#3-推理速度慢" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">3. 推理速度慢</a></h4>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4"><strong class="text-slate-900 dark:text-white font-semibold">原因</strong>：批处理大小不合适
<strong class="text-slate-900 dark:text-white font-semibold">解决</strong>：</p>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">调整 <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 text-rose-600 dark:text-rose-400 rounded text-sm font-mono">max_num_seqs</code></li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">启用连续批处理</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500">使用更快的推理引擎（vLLM/TensorRT-LLM）</li>
</ul>
<h3 id="诊断命令" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#诊断命令" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">诊断命令</a></h3>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">bash</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-bash" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 检查 GPU 状态</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span>nvidia-smi
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 查看容器日志</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">docker</span><span> logs llm-server -f
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 测试 API 连通性</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">curl</span><span> -v http://localhost:8000/health
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">9</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">10</span><span></span><span class="token" style="color:hsl(230, 4%, 64%);font-style:italic"># 监控 GPU 利用率</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">11</span><span></span><span class="token" style="color:hsl(221, 87%, 60%)">watch</span><span> -n </span><span class="token" style="color:hsl(35, 99%, 36%)">1</span><span> nvidia-smi</span></code></pre></div></div></pre>
<h2 id="高级配置" class="text-2xl font-semibold mt-12 mb-4 text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-3 scroll-mt-24"><a href="#高级配置" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">高级配置</a></h2>
<h3 id="多模型负载均衡" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#多模型负载均衡" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">多模型负载均衡</a></h3>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">使用 Nginx 实现多模型实例负载均衡：</p>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">nginx</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-nginx" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token directive" style="color:hsl(301, 63%, 40%)">upstream</span><span class="token directive"> llm_backend</span><span> </span><span class="token" style="color:hsl(230, 8%, 24%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span>    </span><span class="token directive" style="color:hsl(301, 63%, 40%)">server</span><span class="token directive"> localhost:8000</span><span class="token" style="color:hsl(230, 8%, 24%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span>    </span><span class="token directive" style="color:hsl(301, 63%, 40%)">server</span><span class="token directive"> localhost:8001</span><span class="token" style="color:hsl(230, 8%, 24%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>    </span><span class="token directive" style="color:hsl(301, 63%, 40%)">server</span><span class="token directive"> localhost:8002</span><span class="token" style="color:hsl(230, 8%, 24%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span></span><span class="token" style="color:hsl(230, 8%, 24%)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span><span></span><span class="token directive" style="color:hsl(301, 63%, 40%)">server</span><span> </span><span class="token" style="color:hsl(230, 8%, 24%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span><span>    </span><span class="token directive" style="color:hsl(301, 63%, 40%)">listen</span><span class="token directive"> </span><span class="token directive" style="color:hsl(35, 99%, 36%)">80</span><span class="token" style="color:hsl(230, 8%, 24%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">9</span><span>    </span><span class="token directive" style="color:hsl(301, 63%, 40%)">location</span><span class="token directive"> /v1/</span><span> </span><span class="token" style="color:hsl(230, 8%, 24%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">10</span><span>        </span><span class="token directive" style="color:hsl(301, 63%, 40%)">proxy_pass</span><span class="token directive"> http://llm_backend</span><span class="token" style="color:hsl(230, 8%, 24%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">11</span><span>        </span><span class="token directive" style="color:hsl(301, 63%, 40%)">proxy_set_header</span><span class="token directive"> Host </span><span class="token directive" style="color:hsl(221, 87%, 60%)">$host</span><span class="token" style="color:hsl(230, 8%, 24%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">12</span><span>        </span><span class="token directive" style="color:hsl(301, 63%, 40%)">proxy_set_header</span><span class="token directive"> X-Real-IP </span><span class="token directive" style="color:hsl(221, 87%, 60%)">$remote_addr</span><span class="token" style="color:hsl(230, 8%, 24%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">13</span><span>    </span><span class="token" style="color:hsl(230, 8%, 24%)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">14</span><span></span><span class="token" style="color:hsl(230, 8%, 24%)">}</span></code></pre></div></div></pre>
<h3 id="自动扩缩容" class="text-xl font-semibold mt-8 mb-3 text-slate-800 dark:text-slate-200 scroll-mt-24"><a href="#自动扩缩容" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">自动扩缩容</a></h3>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">使用 KEDA 基于队列长度自动扩缩容：</p>
<pre><div class="relative group my-6 rounded-xl overflow-hidden border bg-slate-50 border-slate-200"><div class="flex items-center justify-between px-4 py-2 border-b bg-white border-slate-200"><span class="text-xs uppercase font-semibold tracking-wider text-slate-500">yaml</span><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all text-slate-500 hover:text-slate-700 hover:bg-slate-200" aria-label="复制代码"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-3.5 h-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg><span>复制</span></button></div><div class="overflow-x-auto"><pre style="background:transparent;color:hsl(230, 8%, 24%);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.25rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem"><code class="language-yaml" style="white-space:pre;background:transparent;color:hsl(230, 8%, 24%);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">1</span><span class="token key" style="color:hsl(35, 99%, 36%)">apiVersion</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> keda.sh/v1alpha1
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">2</span><span></span><span class="token key" style="color:hsl(35, 99%, 36%)">kind</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> ScaledObject
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">3</span><span></span><span class="token key" style="color:hsl(35, 99%, 36%)">metadata</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">4</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">name</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> llm</span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span>scaler
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">5</span><span></span><span class="token key" style="color:hsl(35, 99%, 36%)">spec</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">6</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">scaleTargetRef</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">7</span><span>    </span><span class="token key" style="color:hsl(35, 99%, 36%)">name</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> llm</span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span>deployment
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">8</span><span>  </span><span class="token key" style="color:hsl(35, 99%, 36%)">triggers</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">9</span><span>  </span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span> </span><span class="token key" style="color:hsl(35, 99%, 36%)">type</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> metrics</span><span class="token" style="color:hsl(230, 8%, 24%)">-</span><span>api
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">10</span><span>    </span><span class="token key" style="color:hsl(35, 99%, 36%)">metadata</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">11</span><span>      </span><span class="token key" style="color:hsl(35, 99%, 36%)">targetValue</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;10&quot;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.5rem;padding-right:1rem;text-align:right;user-select:none;color:hsl(230, 4%, 64%);font-size:0.75rem;font-style:italic">12</span><span>      </span><span class="token key" style="color:hsl(35, 99%, 36%)">url</span><span class="token" style="color:hsl(230, 8%, 24%)">:</span><span> </span><span class="token" style="color:hsl(119, 34%, 47%)">&quot;http://prometheus:9090/api/v1/query?query=vllm:num_requests_waiting&quot;</span></code></pre></div></div></pre>
<h2 id="最佳实践" class="text-2xl font-semibold mt-12 mb-4 text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-3 scroll-mt-24"><a href="#最佳实践" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">最佳实践</a></h2>
<ol class="my-6 space-y-2 list-decimal list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">生产环境必须使用量化模型</strong>，显存占用降低 50-70%</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">启用连续批处理</strong>，提升吞吐量 3-5 倍</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">配置适当的 max_model_len</strong>，避免内存浪费</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">使用 SSD 存储模型</strong>，减少加载时间</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">定期监控 GPU 温度和利用率</strong>，防止过热</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">启用日志轮转</strong>，防止磁盘占满</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">配置健康检查</strong>，实现故障自动恢复</li>
</ol>
<h2 id="获取支持" class="text-2xl font-semibold mt-12 mb-4 text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-3 scroll-mt-24"><a href="#获取支持" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">获取支持</a></h2>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">遇到部署问题？我们提供：</p>
<ul class="my-6 space-y-2 list-disc list-inside">
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">免费技术咨询</strong>：<a href="/contact" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">预约咨询</a></li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">企业部署服务</strong>：包含环境搭建、模型优化、运维培训</li>
<li class="text-slate-600 dark:text-slate-300 marker:text-indigo-500"><strong class="text-slate-900 dark:text-white font-semibold">7x24 小时支持</strong>：专属技术支持团队</li>
</ul>
<p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4">如需了解更多详情或定制部署方案，请 <a href="/contact" class="text-indigo-600 dark:text-indigo-400 no-underline hover:underline">联系我们</a>。</p></div></article><div class="mt-8 flex items-center justify-between pt-8 border-t border-slate-200 dark:border-slate-700" style="opacity:0"><a class="flex items-center gap-2 text-slate-500 hover:text-indigo-600 transition-colors" href="/zh/docs/"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><span>返回文档列表</span></a></div></main><aside class="hidden lg:block lg:col-span-2"><div class="sticky top-24"></div></aside></div></div></div><!--$--><!--/$--></main><footer class="relative bg-slate-900 dark:bg-black text-slate-300 overflow-hidden"><div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-primary/50 to-transparent"></div><div class="container mx-auto px-4 sm:px-6 lg:px-8"><div class="py-16 lg:py-20"><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-12 lg:gap-8"><div class="lg:col-span-2"><a class="inline-flex items-center gap-3 mb-6 group" href="/zh/"><div class="relative w-10 h-10 rounded-xl overflow-hidden shadow-lg group-hover:shadow-glow transition-shadow"><img alt="Logo" loading="lazy" decoding="async" data-nimg="fill" class="object-cover" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/favicon.jpg"/></div><span class="text-xl font-bold text-white">Metasequoia AI</span></a><p class="text-slate-400 text-sm leading-relaxed mb-6 max-w-sm">Enterprise-grade AI solutions provider specializing in model deployment, application development and intelligent agent customization</p><div class="flex items-center gap-3"><div class="relative"><button class="w-10 h-10 flex items-center justify-center rounded-xl bg-slate-800 hover:bg-primary text-slate-400 hover:text-white transition-all" aria-label="微信公众号"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.326.326 0 0 0 .167-.054l1.903-1.114a.864.864 0 0 1 .717-.098 10.16 10.16 0 0 0 2.837.403c.276 0 .543-.027.811-.05-.857-2.578.157-4.972 1.932-6.446 1.703-1.415 3.882-1.98 5.853-1.838-.576-3.583-4.196-6.348-8.596-6.348zM5.785 5.991c.642 0 1.162.529 1.162 1.18a1.17 1.17 0 0 1-1.162 1.178A1.17 1.17 0 0 1 4.623 7.17c0-.651.52-1.18 1.162-1.18zm5.813 0c.642 0 1.162.529 1.162 1.18a1.17 1.17 0 0 1-1.162 1.178 1.17 1.17 0 0 1-1.162-1.178c0-.651.52-1.18 1.162-1.18zm5.34 2.867c-1.797-.052-3.746.512-5.28 1.786-1.72 1.428-2.687 3.72-1.78 6.22.942 2.453 3.666 4.229 6.884 4.229.826 0 1.622-.12 2.361-.336a.722.722 0 0 1 .598.082l1.584.926a.272.272 0 0 0 .14.047c.134 0 .24-.111.24-.247 0-.06-.023-.12-.038-.177l-.327-1.233a.49.49 0 0 1-.011-.175.49.49 0 0 1 .189-.38C23.063 18.369 24 16.672 24 14.783c0-3.354-3.16-6.007-7.062-5.925zm-2.92 2.691c.535 0 .969.44.969.982a.976.976 0 0 1-.969.983.976.976 0 0 1-.969-.983c0-.542.434-.982.97-.982zm4.844 0c.535 0 .969.44.969.982a.976.976 0 0 1-.969.983.976.976 0 0 1-.969-.983c0-.542.434-.982.969-.982z"></path></svg></button></div><div class="relative"><button class="w-10 h-10 flex items-center justify-center rounded-xl bg-slate-800 hover:bg-primary text-slate-400 hover:text-white transition-all" aria-label="微信视频号"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"></path></svg></button></div><a target="_blank" rel="noopener noreferrer" class="w-10 h-10 flex items-center justify-center rounded-xl bg-slate-800 hover:bg-primary text-slate-400 hover:text-white transition-all" aria-label="Email" href="mailto:c@m9ai.work"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"></path></svg></a></div></div><div><h3 class="text-white font-semibold mb-4">Services</h3><ul class="space-y-3"><li><a class="text-slate-400 hover:text-primary transition-colors text-sm" href="/zh/services/model-deployment/">Model Deployment</a></li><li><a class="text-slate-400 hover:text-primary transition-colors text-sm" href="/zh/services/model-application/">App Development</a></li><li><a class="text-slate-400 hover:text-primary transition-colors text-sm" href="/zh/services/agent-development/">AI Agents</a></li></ul></div><div><h3 class="text-white font-semibold mb-4">Studio</h3><ul class="space-y-3"><li><a class="text-slate-400 hover:text-primary transition-colors text-sm" href="/zh/contact/">Contact Us</a></li><li><a class="text-slate-400 hover:text-primary transition-colors text-sm" href="/zh/docs/">Docs</a></li><li><a class="text-slate-400 hover:text-primary transition-colors text-sm" href="/zh/store/">Store</a></li></ul></div><div><h3 class="text-white font-semibold mb-4">Legal</h3><ul class="space-y-3"><li><a class="text-slate-400 hover:text-primary transition-colors text-sm" href="/zh/privacy-policy/">Privacy Policy</a></li><li><a class="text-slate-400 hover:text-primary transition-colors text-sm" href="/zh/terms-of-service/">Terms of Service</a></li></ul></div></div></div><div class="py-6 border-t border-slate-800"><div class="flex flex-col md:flex-row items-center justify-between gap-4"><p class="text-slate-500 text-sm flex items-center gap-1">© <!-- -->2026<!-- --> <!-- -->Metasequoia AI<!-- -->. <!-- -->Made with<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4 text-accent inline"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"></path></svg>. All rights reserved.</p><button class="flex items-center gap-2 text-slate-400 hover:text-primary transition-colors text-sm group">Back to Top<span class="w-8 h-8 flex items-center justify-center rounded-lg bg-slate-800 group-hover:bg-primary group-hover:text-white transition-all"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"></path></svg></span></button></div></div></div></footer></div><script>
          if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
              navigator.serviceWorker.register('/m9ai-sw.js').then(function(registration) {
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
              }).catch(function(err) {
                console.log('ServiceWorker registration failed: ', err);
              });
            });
          }
        </script><script src="/_next/static/chunks/webpack-cc328fc80d1d92f9.js" id="_R_" async=""></script></body></html><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n4:I[50543,[],\"\"]\n5:I[94707,[],\"\"]\n7:I[76813,[],\"OutletBoundary\"]\n9:I[29979,[],\"AsyncMetadataOutlet\"]\nb:I[76813,[],\"ViewportBoundary\"]\nd:I[76813,[],\"MetadataBoundary\"]\ne:\"$Sreact.suspense\"\n10:I[70069,[],\"\"]\n:HL[\"/_next/static/css/b2aa10a3cb761d2f.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"n-OaHVlfcIetbxWrGFmpn\",\"p\":\"\",\"c\":[\"\",\"en\",\"docs\",\"model-deployment\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[[\"locale\",\"en\",\"d\"],{\"children\":[\"docs\",{\"children\":[[\"slug\",\"model-deployment\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b2aa10a3cb761d2f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],\"$L2\"]}],{\"children\":[[\"locale\",\"en\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,\"$L3\"]}],{\"children\":[\"docs\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"model-deployment\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",null,[\"$\",\"$L7\",null,{\"children\":[\"$L8\",[\"$\",\"$L9\",null,{\"promise\":\"$@a\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}],null],[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$e\",null,{\"fallback\":null,\"children\":\"$Lf\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"11:I[44963,[\"6752\",\"static/chunks/6752-90baefdcb051c3c1.js\",\"2346\",\"static/chunks/2346-8f59889a5170c5da.js\",\"4345\",\"static/chunks/app/not-found-ffca88c5e945e772.js\"],\"default\"]\n12:I[33084,[\"6752\",\"static/chunks/6752-90baefdcb051c3c1.js\",\"1909\",\"static/chunks/1909-ac3fe94adcf1a95e.js\",\"2346\",\"static/chunks/2346-8f59889a5170c5da.js\",\"1278\",\"static/chunks/1278-1b71cee32080193b.js\",\"1399\",\"static/chunks/1399-c867858dd6d3be69.js\",\"8450\",\"static/chunks/app/%5Blocale%5D/layout-41f8cce3b90dae17.js\"],\"ThemeProvider\"]\n14:I[86653,[\"6752\",\"static/chunks/6752-90baefdcb051c3c1.js\",\"1909\",\"static/chunks/1909-ac3fe94adcf1a95e.js\",\"2346\",\"static/chunks/2346-8f59889a5170c5da.js\",\"1278\",\"static/chunks/1278-1b71cee32080193b.js\",\"1399\",\"static/chunks/1399-c867858dd6d3be69.js\",\"8450\",\"static/chunks/app/%5Blocale%5D/layout-41f8cce3b90dae17.js\"],\"default\"]\n2:[\"$\",\"html\",null,{\"lang\":\"$undefined\",\"children\":[\"$\",\"body\",null,{\"className\":\"antialiased\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"$L11\",null,{}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]\n"])</script><script>self.__next_f.push([1,"3:[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1.0\"}],[\"$\",\"meta\",null,{\"name\":\"author\",\"content\":\"Metasequoia AI Studio\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/manifest.json\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#000000\"}]]}],[\"$\",\"body\",null,{\"className\":\"antialiased\",\"children\":[[\"$\",\"$L12\",null,{\"children\":\"$L13\"}],[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n          if ('serviceWorker' in navigator) {\\n            window.addEventListener('load', function() {\\n              navigator.serviceWorker.register('/m9ai-sw.js').then(function(registration) {\\n                console.log('ServiceWorker registration successful with scope: ', registration.scope);\\n              }).catch(function(err) {\\n                console.log('ServiceWorker registration failed: ', err);\\n              });\\n            });\\n          }\\n        \"}}],[\"$\",\"$L14\",null,{}]]}]]}]\n"])</script><script>self.__next_f.push([1,"15:I[7765,[\"6752\",\"static/chunks/6752-90baefdcb051c3c1.js\",\"1909\",\"static/chunks/1909-ac3fe94adcf1a95e.js\",\"8267\",\"static/chunks/8267-dd1b836d6e85c2aa.js\",\"4078\",\"static/chunks/4078-f6abe0d6c13465e4.js\",\"8143\",\"static/chunks/app/%5Blocale%5D/docs/%5Bslug%5D/page-1401b27bc56f3599.js\"],\"default\"]\n16:T3686,"])</script><script>self.__next_f.push([1,"\n# 模型部署指南\n\n## 概述\n\n我们提供主流大模型的本地化部署方案，帮助企业在自有基础设施上运行大语言模型，保障数据安全与隐私，支持自定义微调与性能优化。本指南涵盖从单机部署到分布式集群的完整方案。\n\n## 支持的模型\n\n### 开源模型\n\n| 模型 | 参数量 | 显存需求 | 推荐用途 | 特点 |\n|------|--------|----------|----------|------|\n| **DeepSeek** | 7B-67B | 16GB-140GB | 代码生成、数学推理 | 开源最强代码模型，支持 128K 长上下文 |\n| **Qwen (通义千问)** | 7B-72B | 16GB-160GB | 中文场景、代码生成 | 中文理解优秀，支持 function call |\n| **LLaMA 2/3** | 7B-70B | 16GB-160GB | 通用对话、文本生成 | 生态丰富，社区支持广泛 |\n| **Yi (零一万物)** | 6B-34B | 14GB-80GB | 中英文混合场景 | 中文表现优异，支持长文本 |\n| **ChatGLM3** | 6B | 14GB | 中文对话、轻量级部署 | 低资源占用，适合边缘部署 |\n| **Baichuan2** | 7B-13B | 16GB-28GB | 中文场景、企业应用 | 商用友好，中文知识丰富 |\n| **Mistral** | 7B-8x7B | 16GB-90GB | 多语言推理 | MoE 架构，推理效率高 |\n\n#### 特色模型详解\n\n##### DeepSeek 系列\nDeepSeek 是目前最强的开源代码大模型，特别适合开发场景：\n\n- **DeepSeek-Coder-33B**: 代码生成能力接近 GPT-4\n- **DeepSeek-V2**: 采用 MLA 架构，推理成本低，支持 128K 上下文\n- **DeepSeek-Math**: 数学推理专项优化，竞赛级表现\n\n```bash\n# DeepSeek 快速部署\ndocker pull m9ai/deepseek-coder-33b:latest\ndocker run -d --gpus all -p 8000:8000 m9ai/deepseek-coder-33b:latest\n```\n\n##### Kimi 系列 (Moonshot)\nKimi 以超长上下文窗口著称，适合文档分析场景：\n\n- **Kimi-V1**: 支持 200K 超长上下文\n- **Kimi-V1.5**: 多模态能力，支持图像理解\n- **适用场景**: 长文档摘要、法律合同分析、论文研读\n\n```bash\n# Kimi 模型部署（需申请授权）\ndocker run -d \\\n  -e MOONSHOT_API_KEY=your_key \\\n  -p 8000:8000 \\\n  m9ai/kimi-v1:latest\n```\n\n### 商用模型（需授权）\n\n| 模型 | 部署方式 | 适用场景 |\n|------|----------|----------|\n| GPT 系列 | Azure OpenAI 私有化 | 通用对话、复杂推理 |\n| 文心一言企业版 | 百度智能云私有化 | 中文企业应用 |\n| 讯飞星火企业版 | 讯飞云平台 | 语音识别、教育场景 |\n| **Kimi** | 月之暗面私有化部署 | 长文档分析、法律金融 |\n\n---\n\n## 模型选型指南\n\n根据不同业务场景选择合适的模型：\n\n### 代码开发场景\n**首选**: DeepSeek-Coder-33B\n- 代码生成准确率最高\n- 支持 128K 长代码文件分析\n- 精通 Python、Java、JavaScript 等主流语言\n\n### 中文对话场景\n**首选**: Qwen2.5-72B\n- 中文理解能力业界领先\n- 支持 function call 工具调用\n- 中文知识库丰富\n\n### 长文档分析场景\n**首选**: Kimi-V1\n- 200K 超长上下文窗口\n- 适合论文、合同、报告分析\n- 信息提取准确率高\n\n### 轻量级部署场景\n**首选**: ChatGLM3-6B 或 DeepSeek-7B\n- 单张消费级显卡可运行\n- 响应速度快\n- 适合边缘设备部署\n\n## 系统要求\n\n### 最低配置（7B 模型）\n\n- **CPU**: 8 核及以上\n- **内存**: 32GB 及以上\n- **存储**: 100GB SSD 及以上\n- **GPU**: NVIDIA RTX 3090 / A10 / T4（24GB 显存）\n\n### 推荐配置（13B-70B 模型）\n\n- **CPU**: 16 核及以上\n- **内存**: 64GB-256GB\n- **存储**: 500GB NVMe SSD\n- **GPU**: \n  - 13B 模型: A100 40GB 或 RTX 4090\n  - 70B 模型: 2x A100 80GB 或 4x A10\n\n### 软件环境\n\n- **操作系统**: Ubuntu 20.04/22.04 LTS, CentOS 7/8\n- **CUDA**: 11.8 或 12.1\n- **Docker**: 20.10+（推荐）\n- **Python**: 3.9-3.11\n\n## 部署方式\n\n### 方式一：Docker 快速部署（推荐）\n\n#### 1. 安装 Docker 和 NVIDIA Docker\n\n```bash\n# 安装 Docker\ncurl -fsSL https://get.docker.com | sh\n\n# 安装 NVIDIA Container Toolkit\ndistribution=$(. /etc/os-release;echo $ID$VERSION_ID)\ncurl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -\ncurl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | sudo tee /etc/apt/sources.list.d/nvidia-docker.list\n\nsudo apt-get update\nsudo apt-get install -y nvidia-container-toolkit\nsudo systemctl restart docker\n```\n\n#### 2. 拉取模型镜像\n\n```bash\n# DeepSeek Coder 33B（推荐）\ndocker pull m9ai/deepseek-coder-33b:latest\n\n# 通义千问 72B\ndocker pull m9ai/qwen2.5-72b:latest\n\n# LLaMA 2 7B\ndocker pull m9ai/llama2-7b:latest\n```\n\n#### 3. 启动容器\n\n```bash\ndocker run -d \\\n  --name llm-server \\\n  --gpus all \\\n  -p 8000:8000 \\\n  -v /data/models:/models \\\n  -e MODEL_PATH=/models/llama-2-7b \\\n  -e CUDA_VISIBLE_DEVICES=0 \\\n  m9ai/llama2-7b:latest\n```\n\n#### 4. 验证部署\n\n```bash\ncurl http://localhost:8000/v1/models\n\n# 测试对话（DeepSeek 示例）\ncurl -X POST http://localhost:8000/v1/chat/completions \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"model\": \"deepseek-coder-33b\",\n    \"messages\": [{\"role\": \"user\", \"content\": \"用 Python 写一个快速排序算法\"}]\n  }'\n\n# 测试长文本（Kimi 示例）\ncurl -X POST http://localhost:8000/v1/chat/completions \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"model\": \"kimi-v1\",\n    \"messages\": [{\"role\": \"user\", \"content\": \"请总结这篇论文的主要内容...\"}]\n  }'\n```\n\n### 方式二：Kubernetes 集群部署\n\n适用于大规模生产环境，支持自动扩缩容。\n\n#### 1. 准备 Kubernetes 集群\n\n确保集群已配置 NVIDIA GPU 设备插件：\n\n```bash\nkubectl apply -f https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/v0.14.0/nvidia-device-plugin.yml\n```\n\n#### 2. 部署模型服务\n\n```yaml\n# model-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: llm-deployment\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: llm-server\n  template:\n    metadata:\n      labels:\n        app: llm-server\n    spec:\n      containers:\n      - name: llm\n        image: m9ai/llama2-7b:latest\n        resources:\n          limits:\n            nvidia.com/gpu: 1\n        ports:\n        - containerPort: 8000\n        env:\n        - name: MODEL_PATH\n          value: \"/models/llama-2-7b\"\n        volumeMounts:\n        - name: model-storage\n          mountPath: /models\n      volumes:\n      - name: model-storage\n        persistentVolumeClaim:\n          claimName: model-pvc\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: llm-service\nspec:\n  selector:\n    app: llm-server\n  ports:\n  - port: 8000\n    targetPort: 8000\n  type: LoadBalancer\n```\n\n部署：\n\n```bash\nkubectl apply -f model-deployment.yaml\n```\n\n### 方式三：裸机部署\n\n适用于需要深度定制的场景。\n\n#### 1. 安装依赖\n\n```bash\n# 安装 Python 依赖\npip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118\npip install transformers accelerate bitsandbytes\npip install vllm  # 高性能推理引擎\n```\n\n#### 2. 下载模型\n\n```python\nfrom huggingface_hub import snapshot_download\n\n# 下载模型到本地\nmodel_path = snapshot_download(\n    repo_id=\"meta-llama/Llama-2-7b-chat-hf\",\n    local_dir=\"./models/llama-2-7b\",\n    token=\"your_huggingface_token\"\n)\n```\n\n#### 3. 启动服务（使用 vLLM）\n\n```python\nfrom vllm import LLM, SamplingParams\n\n# 初始化模型\nllm = LLM(\n    model=\"./models/llama-2-7b\",\n    tensor_parallel_size=1,  # GPU 数量\n    gpu_memory_utilization=0.9,\n    max_model_len=4096\n)\n\n# 推理示例\nsampling_params = SamplingParams(temperature=0.7, max_tokens=512)\nprompts = [\"你好，请介绍一下自己\"]\noutputs = llm.generate(prompts, sampling_params)\n\nfor output in outputs:\n    print(output.outputs[0].text)\n```\n\n## 性能优化\n\n### 量化技术\n\n使用 4-bit 或 8-bit 量化可大幅降低显存占用：\n\n```python\nfrom transformers import AutoModelForCausalLM, BitsAndBytesConfig\n\n# 4-bit 量化配置\nquantization_config = BitsAndBytesConfig(\n    load_in_4bit=True,\n    bnb_4bit_compute_dtype=torch.float16,\n    bnb_4bit_quant_type=\"nf4\",\n    bnb_4bit_use_double_quant=True,\n)\n\nmodel = AutoModelForCausalLM.from_pretrained(\n    \"model_path\",\n    quantization_config=quantization_config,\n    device_map=\"auto\"\n)\n```\n\n**量化效果对比：**\n\n| 模型 | 原始显存 | 8-bit 显存 | 4-bit 显存 | 性能损失 |\n|------|----------|------------|------------|----------|\n| DeepSeek-Coder-33B | 66GB | 38GB | 22GB | \u003c3% |\n| Qwen2.5-72B | 144GB | 82GB | 48GB | \u003c4% |\n| LLaMA2-7B | 14GB | 8GB | 5GB | \u003c3% |\n| LLaMA2-13B | 26GB | 15GB | 9GB | \u003c5% |\n| LLaMA2-70B | 140GB | 80GB | 48GB | \u003c5% |\n\n### 推理加速\n\n#### vLLM 加速\n\nvLLM 使用 PagedAttention 算法，可提升 2-4 倍吞吐量：\n\n```bash\npython -m vllm.entrypoints.openai.api_server \\\n  --model /models/llama-2-7b \\\n  --tensor-parallel-size 1 \\\n  --max-num-seqs 256 \\\n  --max-model-len 4096\n```\n\n#### TensorRT-LLM 加速\n\nNVIDIA TensorRT-LLM 可提供极致性能：\n\n```bash\n# 构建 TensorRT 引擎\ntrtllm-build --checkpoint_dir ./model \\\n             --output_dir ./trt_engines/llama-7b \\\n             --gemm_plugin float16\n\n# 运行推理\npython3 run.py --engine_dir=./trt_engines/llama-7b \\\n               --max_output_len=512\n```\n\n### 缓存策略\n\n启用 KV Cache 可加速多轮对话：\n\n```python\n# vLLM 自动管理 KV Cache\nllm = LLM(\n    model=\"model_path\",\n    enable_prefix_caching=True,  # 前缀缓存\n    max_num_batched_tokens=4096\n)\n```\n\n## API 使用指南\n\n### OpenAI 兼容接口\n\n我们的部署方案提供与 OpenAI API 兼容的接口：\n\n```python\nfrom openai import OpenAI\n\nclient = OpenAI(\n    base_url=\"http://localhost:8000/v1\",\n    api_key=\"dummy\"  # 本地部署可不设置\n)\n\n# DeepSeek 代码生成示例\nresponse = client.chat.completions.create(\n    model=\"deepseek-coder-33b\",\n    messages=[\n        {\"role\": \"system\", \"content\": \"你是一个专业程序员\"},\n        {\"role\": \"user\", \"content\": \"用 Python 实现一个 LRU 缓存\"}\n    ],\n    temperature=0.3,\n    max_tokens=2048\n)\n\n# Kimi 长文档分析示例\nresponse = client.chat.completions.create(\n    model=\"kimi-v1\",\n    messages=[\n        {\"role\": \"user\", \"content\": \"请分析这份 50 页的报告，提取核心观点...\"}\n    ],\n    temperature=0.5,\n    max_tokens=4096\n)\n\nprint(response.choices[0].message.content)\n```\n\n### 流式响应\n\n```python\nstream = client.chat.completions.create(\n    model=\"llama-2-7b\",\n    messages=[{\"role\": \"user\", \"content\": \"写一首诗\"}],\n    stream=True\n)\n\nfor chunk in stream:\n    if chunk.choices[0].delta.content:\n        print(chunk.choices[0].delta.content, end=\"\")\n```\n\n## 监控与日志\n\n### 启用 Prometheus 监控\n\n```bash\ndocker run -d \\\n  --name llm-monitor \\\n  -p 8000:8000 \\\n  -e ENABLE_METRICS=true \\\n  -e PROMETHEUS_PORT=8080 \\\n  m9ai/llama2-7b:latest\n```\n\n监控指标：\n\n- `vllm:gpu_cache_usage_perc` - GPU 缓存使用率\n- `vllm:num_requests_running` - 正在处理的请求数\n- `vllm:time_to_first_token_seconds` - 首 token 延迟\n- `vllm:time_per_output_token_seconds` - 每个 token 生成时间\n\n### 日志配置\n\n```yaml\n# logging.yaml\nlogging:\n  level: INFO\n  format: \"%(asctime)s - %(name)s - %(levelname)s - %(message)s\"\n  handlers:\n    - file: /var/log/llm-server.log\n    - console\n```\n\n## 安全与合规\n\n### 网络安全\n\n- 使用 HTTPS/TLS 加密通信\n- 配置防火墙规则，限制访问 IP\n- 启用 API 密钥认证\n\n```bash\n# 生成 API 密钥\nexport API_KEY=$(openssl rand -hex 32)\n\n# 启动时启用认证\ndocker run -e API_KEY=$API_KEY m9ai/llama2-7b:latest\n```\n\n### 数据保护\n\n- 所有数据保留在本地，不传输到外部\n- 支持磁盘加密\n- 定期安全审计\n\n## 故障排查\n\n### 常见问题\n\n#### 1. CUDA Out of Memory\n\n**原因**：显存不足\n**解决**：\n- 启用量化（4-bit/8-bit）\n- 减小 `max_model_len`\n- 使用 ZeRO  offload 到 CPU\n\n```python\nllm = LLM(\n    model=\"model_path\",\n    gpu_memory_utilization=0.85,  # 降低显存占用比例\n    max_model_len=2048  # 减小最大序列长度\n)\n```\n\n#### 2. 模型加载缓慢\n\n**原因**：磁盘 I/O 瓶颈\n**解决**：\n- 使用 NVMe SSD\n- 预加载模型到内存\n- 启用模型并行\n\n#### 3. 推理速度慢\n\n**原因**：批处理大小不合适\n**解决**：\n- 调整 `max_num_seqs`\n- 启用连续批处理\n- 使用更快的推理引擎（vLLM/TensorRT-LLM）\n\n### 诊断命令\n\n```bash\n# 检查 GPU 状态\nnvidia-smi\n\n# 查看容器日志\ndocker logs llm-server -f\n\n# 测试 API 连通性\ncurl -v http://localhost:8000/health\n\n# 监控 GPU 利用率\nwatch -n 1 nvidia-smi\n```\n\n## 高级配置\n\n### 多模型负载均衡\n\n使用 Nginx 实现多模型实例负载均衡：\n\n```nginx\nupstream llm_backend {\n    server localhost:8000;\n    server localhost:8001;\n    server localhost:8002;\n}\n\nserver {\n    listen 80;\n    location /v1/ {\n        proxy_pass http://llm_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n    }\n}\n```\n\n### 自动扩缩容\n\n使用 KEDA 基于队列长度自动扩缩容：\n\n```yaml\napiVersion: keda.sh/v1alpha1\nkind: ScaledObject\nmetadata:\n  name: llm-scaler\nspec:\n  scaleTargetRef:\n    name: llm-deployment\n  triggers:\n  - type: metrics-api\n    metadata:\n      targetValue: \"10\"\n      url: \"http://prometheus:9090/api/v1/query?query=vllm:num_requests_waiting\"\n```\n\n## 最佳实践\n\n1. **生产环境必须使用量化模型**，显存占用降低 50-70%\n2. **启用连续批处理**，提升吞吐量 3-5 倍\n3. **配置适当的 max_model_len**，避免内存浪费\n4. **使用 SSD 存储模型**，减少加载时间\n5. **定期监控 GPU 温度和利用率**，防止过热\n6. **启用日志轮转**，防止磁盘占满\n7. **配置健康检查**，实现故障自动恢复\n\n## 获取支持\n\n遇到部署问题？我们提供：\n\n- **免费技术咨询**：[预约咨询](/contact)\n- **企业部署服务**：包含环境搭建、模型优化、运维培训\n- **7x24 小时支持**：专属技术支持团队\n\n如需了解更多详情或定制部署方案，请 [联系我们](/contact)。"])</script><script>self.__next_f.push([1,"6:[\"$\",\"$L15\",null,{\"doc\":{\"slug\":\"model-deployment\",\"title\":\"模型部署指南\",\"description\":\"提供主流大模型的本地化部署方案，保障数据安全与隐私，支持自定义微调与性能优化\",\"category\":\"技术文档\",\"tags\":[\"模型部署\",\"私有化\",\"大模型\",\"GPU\",\"Docker\",\"Kubernetes\"],\"updatedAt\":\"2025-02-10\",\"content\":\"$16\"},\"allDocs\":[{\"slug\":\"api-integration\",\"title\":\"API 集成开发指南\",\"category\":\"开发指南\"},{\"slug\":\"api-reference\",\"title\":\"API 文档\",\"category\":\"技术文档\"},{\"slug\":\"faq\",\"title\":\"常见问题\",\"category\":\"帮助中心\"},{\"slug\":\"introduction\",\"title\":\"欢迎使用水杉智境工作室\",\"category\":\"入门指南\"},{\"slug\":\"knowledge-base\",\"title\":\"本地知识库搭建指南\",\"category\":\"进阶教程\"},{\"slug\":\"model-deployment\",\"title\":\"模型部署指南\",\"category\":\"技术文档\"},{\"slug\":\"privacy-policy-en\",\"title\":\"privacy-policy-en\",\"category\":\"其他\"},{\"slug\":\"privacy-policy\",\"title\":\"privacy-policy\",\"category\":\"其他\"},{\"slug\":\"prompt-engineering\",\"title\":\"提示词工程最佳实践\",\"category\":\"进阶教程\"},{\"slug\":\"terms-of-service-en\",\"title\":\"terms-of-service-en\",\"category\":\"其他\"},{\"slug\":\"terms-of-service\",\"title\":\"terms-of-service\",\"category\":\"其他\"},{\"slug\":\"workflow\",\"title\":\"AI 工作流搭建实战\",\"category\":\"进阶教程\"}]}]\n"])</script><script>self.__next_f.push([1,"17:I[3338,[\"6752\",\"static/chunks/6752-90baefdcb051c3c1.js\",\"1909\",\"static/chunks/1909-ac3fe94adcf1a95e.js\",\"2346\",\"static/chunks/2346-8f59889a5170c5da.js\",\"1278\",\"static/chunks/1278-1b71cee32080193b.js\",\"1399\",\"static/chunks/1399-c867858dd6d3be69.js\",\"8450\",\"static/chunks/app/%5Blocale%5D/layout-41f8cce3b90dae17.js\"],\"default\"]\n"])</script><script>self.__next_f.push([1,"13:[\"$\",\"$L17\",null,{\"formats\":\"$undefined\",\"locale\":\"zh\",\"messages\":{\"meta\":{\"defaultTitle\":\"Metasequoia AI Studio\",\"defaultDescription\":\"Metasequoia AI Studio provides private deployment of large models, application development and intelligent agent customization services\",\"privacyPolicyTitle\":\"Privacy Policy\",\"privacyPolicyDescription\":\"This Privacy Policy explains how we collect, use, and safeguard your personal information when you use our website and services.\",\"termsOfServiceTitle\":\"Terms of Service\",\"termsOfServiceDescription\":\"These Terms of Service outline the rules and regulations governing the use of our website and services.\"},\"Contact\":{\"title\":\"Contact Us\",\"about\":{\"title\":\"About Us\",\"description\":\"Metasequoia AI Studio is a team focused on innovative technology solutions, dedicated to providing high-quality products and services to clients. We specialize in AGI application solutions, helping enterprises achieve digital and intelligent transformation.\"},\"founder\":{\"title\":\"Founder\",\"name\":\"Jian Zhang\",\"description\":\"Founder of Metasequoia AI Studio, with years of experience in software development and team management, specializing in AI technology applications and user experience. Has participated in the design and development of multiple large-scale projects, passionate about open-source technology and innovative solutions.\",\"viewProfile\":\"View Profile\"},\"contact\":{\"title\":\"Contact Us\",\"description\":\"If you have any questions or cooperation intentions, please contact us through the following methods:\",\"emailLabel\":\"Email\",\"phoneLabel\":\"Phone\",\"locationLabel\":\"Location\",\"wechatLabel\":\"WeChat\"}},\"title\":\"Metasequoia Studio\",\"subtitle\":\"Low-Cost AI Agent Service Platform\",\"description\":\"Providing customers with large model privatization deployment, application development and intelligent agent customization services\",\"learnMore\":\"Learn More →\",\"form\":\"Form\",\"home\":{\"title\":\"Welcome to Metasequoia Studio\",\"subtitle\":\"AI Solutions for Enterprise\",\"description\":\"We provide cutting-edge AI development services to help businesses transform digitally\",\"features\":{\"title\":\"Our Core Features\",\"items\":[{\"title\":\"Custom AI Models\",\"description\":\"Tailor-made large language models trained on your specific business data\"},{\"title\":\"Seamless Integration\",\"description\":\"Connect AI capabilities with your existing systems and workflows\"},{\"title\":\"Data Security\",\"description\":\"Enterprise-grade security protocols to protect your sensitive information\"},{\"title\":\"Scalable Architecture\",\"description\":\"Solutions that grow with your business needs and user base\"}]},\"testimonials\":{\"title\":\"What Our Clients Say\",\"items\":[{\"quote\":\"The AI solution transformed our customer service operations, reducing response times by 60%\",\"author\":\"CTO, Tech Innovations Inc.\"},{\"quote\":\"Their personalized approach to AI development helped us achieve our business goals faster than expected\",\"author\":\"CEO, Digital Transformation Group\"}]}},\"services\":{\"meta\":{\"title\":\"AI Services | Metasequoia Studio\",\"description\":\"Enterprise-grade AI solutions including private model deployment, application development and agent development\"},\"categories\":{\"aiService\":\"AI Service\"},\"pageTitle\":\"Our Services\",\"sectionTitle\":\"Our Core Services\",\"sectionDescription\":\"Providing comprehensive AI application development solutions to meet the needs of customers in different industries\",\"sectionTag\":\"Services\",\"viewAllServices\":\"View All Services\",\"cta\":{\"consultExpert\":\"Consult Expert\",\"readyForAIDescription\":\"Ready to start your AI transformation journey? Our expert team is ready to support you\",\"readyForAI\":\"Ready for AI\",\"consultSolution\":\"Consult Solution\",\"learnMore\":\"Learn More\"},\"learnMore\":\"Learn More\",\"sections\":{\"coreAdvantages\":\"Core Advantages\",\"scenarios\":\"Scenarios\",\"technicalFeatures\":\"Technical Features\",\"caseStudies\":\"Case Studies\"},\"backToList\":\"Back to Service List\",\"model-deployment\":{\"title\":\"Model Deployment\",\"description\":\"Deploy large language models in the customer's own server environment to ensure data security and privacy protection\",\"details\":\"Provide localized deployment solutions for mainstream large models, ensuring data security and privacy, supporting custom fine-tuning and performance optimization.\",\"coreAdvantages\":{\"supportAllModels\":{\"title\":\"Support for All Major Models\",\"description\":\"Local adaptation of 10+ mainstream large models including GPT series, LLaMA, Wenxin Yiyan, and iFlytek Spark\"},\"dataSecurity\":{\"title\":\"Data Security and Privacy Protection\",\"description\":\"Models deployed on customer's own servers with data never leaving local network\"},\"customization\":{\"title\":\"Deep Customization and Fine-tuning\",\"description\":\"Model fine-tuning based on customer business data to improve response quality\"},\"performanceOptimization\":{\"title\":\"Performance Optimization and Resource Management\",\"description\":\"Optimize model inference speed and reduce memory usage for different hardware\"}},\"scenarios\":{\"dataSensitiveIndustries\":{\"title\":\"Data-Sensitive Industries\",\"description\":\"Localized deployment solutions for finance, healthcare and other privacy-sensitive industries\"},\"localResponse\":{\"title\":\"Low-Latency Local Response\",\"description\":\"Local deployment meeting real-time interaction needs with 90% faster response\"}},\"technicalFeatures\":{\"toolchain\":{\"title\":\"One-Stop Deployment Toolchain\",\"description\":\"Automated deployment scripts and monitoring dashboard simplifying operations\"},\"hybridDeployment\":{\"title\":\"Hybrid Deployment Mode\",\"description\":\"Support local + cloud hybrid deployment balancing cost and performance\"}},\"cases\":[{\"title\":\"State-Owned Bank Intelligent Customer Service\",\"description\":\"Local model deployment handling 100,000+ daily customer inquiries with 92% accuracy\"}]},\"model-application\":{\"title\":\"LLM Application Development\",\"description\":\"Build enterprise-level applications based on large language models for intelligent customer service and content generation\",\"details\":\"Custom development of enterprise-level applications based on large models, integrating business system data for intelligent upgrading.\",\"coreAdvantages\":{\"multimodal\":{\"title\":\"Multimodal Interaction Capability\",\"description\":\"Comprehensive interaction experience integrating text, voice and images\"},\"lowCode\":{\"title\":\"Low-Code Rapid Development\",\"description\":\"Visual configuration platform reducing AI application development threshold\"},\"businessIntegration\":{\"title\":\"Deep Business System Integration\",\"description\":\"Seamless connection with CRM, ERP and other enterprise systems\"}},\"scenarios\":{\"intelligentInteraction\":{\"title\":\"Intelligent Interaction System\",\"description\":\"Enterprise intelligent customer service, voice assistants and other NLP interaction products\"},\"contentCreation\":{\"title\":\"Content Creation Platform\",\"description\":\"Automated copywriting generation, intelligent typesetting and multi-platform publishing\"},\"dataIntelligence\":{\"title\":\"Data Intelligence Analysis\",\"description\":\"Unstructured data parsing and intelligent report generation\"}},\"technicalFeatures\":{\"apiManagement\":{\"title\":\"Comprehensive API Management\",\"description\":\"Standardized interface design supporting high concurrent requests and traffic control\"},\"monitoring\":{\"title\":\"End-to-End Monitoring\",\"description\":\"User behavior analysis and model performance monitoring for continuous optimization\"}},\"cases\":[{\"title\":\"Online Education Intelligent Q\u0026A Platform\",\"description\":\"AI tutoring system for K12 education institutions covering 85% of common subject questions\"}]},\"agent-development\":{\"title\":\"AI Agent Development\",\"description\":\"Develop AI agents with autonomous decision-making capabilities to automate complex business processes\",\"details\":\"Custom development of AI agents with task planning, tool usage and autonomous learning capabilities to empower enterprise automation.\",\"coreAdvantages\":{\"autonomousPlanning\":{\"title\":\"Autonomous Task Planning\",\"description\":\"Decompose complex tasks based on goals and dynamically adjust execution strategies\"},\"toolIntegration\":{\"title\":\"Multi-Tool Integration\",\"description\":\"Connect internal enterprise systems and external APIs to expand agent capabilities\"},\"memoryManagement\":{\"title\":\"Long-Term Memory Management\",\"description\":\"Context understanding and long-term memory storage supporting coherent dialogue\"}},\"scenarios\":{\"automation\":{\"title\":\"Process Automation\",\"description\":\"Automated processing of repetitive tasks like expense reimbursement and contract review\"},\"complexProcess\":{\"title\":\"Complex Business Processes\",\"description\":\"Multi-step complex task processing for R\u0026D project management and market analysis\"}},\"technicalFeatures\":{\"decisionFramework\":{\"title\":\"Reinforcement Learning Decision Framework\",\"description\":\"Continuously optimize decision models based on environmental feedback\"},\"humanMachine\":{\"title\":\"Human-Machine Collaboration Mechanism\",\"description\":\"Human intervention at key decision nodes to ensure task accuracy\"}},\"cases\":[{\"title\":\"E-Commerce Intelligent Operations Assistant\",\"description\":\"Automated product listing, inventory management and marketing planning increasing efficiency by 60%\"}]},\"education\":{\"title\":\"Education Industry Solutions\",\"description\":\"AI-assisted teaching system with personalized learning path planning and intelligent Q\u0026A\"},\"finance\":{\"title\":\"Financial Risk Control System\",\"description\":\"Intelligent risk assessment and fraud detection to enhance financial security levels\"},\"healthcare\":{\"title\":\"Medical Auxiliary Diagnosis\",\"description\":\"Medical image analysis and auxiliary diagnosis suggestions to improve diagnostic accuracy\"}},\"navbar\":{\"logo\":\"Metasequoia AI\",\"services\":\"Services\",\"docs\":\"Docs\",\"store\":\"Store\",\"cta\":\"Get Started\",\"menu\":{\"home\":\"Home\",\"services\":\"Services\",\"cases\":\"Cases\",\"partners\":\"Partners\",\"contact\":\"Contact\",\"store\":\"Store\",\"docs\":\"Docs\"},\"language\":\"Language\",\"themeToggle\":\"Toggle Theme\"},\"search\":{\"buttonLabel\":\"Search\",\"placeholder\":\"Search services, docs, pages...\",\"loading\":\"Loading search index...\",\"results\":\"Search Results\",\"noResults\":\"No results found\",\"tryDifferentKeywords\":\"Try different keywords\",\"quickAccess\":\"Quick Access\",\"quickLinks\":{\"services\":\"Services\",\"docs\":\"Documentation\",\"store\":\"App Store\",\"contact\":\"Contact\"},\"proTip\":\"AI Smart Search\",\"proTipContent\":\"Supports fuzzy matching and semantic search, just type keywords to find relevant content quickly\",\"navigate\":\"Navigate\",\"select\":\"Select\",\"poweredBy\":\"AI-Powered Search\"},\"footer\":{\"logoAlt\":\"Metasequoia Studio Logo\",\"logoText\":\"Metasequoia AI\",\"copyright\":\"© 2025 Metasequoia Studio. All rights reserved.\",\"privacyPolicy\":\"Privacy Policy\",\"termsOfService\":\"Terms of Service\",\"contactUs\":\"Contact Us\",\"description\":\"Enterprise-grade AI solutions provider specializing in model deployment, application development and intelligent agent customization\",\"services\":\"Services\",\"company\":\"Studio\",\"legal\":\"Legal\",\"madeWith\":\"Made with\",\"allRightsReserved\":\". All rights reserved.\",\"backToTop\":\"Back to Top\",\"links\":{\"privacy\":\"Privacy Policy\",\"terms\":\"Terms of Service\",\"sitemap\":\"Sitemap\"},\"contact\":{\"email\":\"Contact Email\",\"phone\":\"Contact Phone\"}},\"common\":{\"buttons\":{\"submit\":\"Submit\",\"cancel\":\"Cancel\",\"save\":\"Save\",\"close\":\"Close\",\"learnMore\":\"Learn More\"},\"errors\":{\"networkError\":\"Network error, please try again later\",\"serverError\":\"Server error, please contact administrator\",\"notFound\":\"Resource not found\",\"permissionDenied\":\"Permission denied\"},\"notifications\":{\"info\":\"Information\",\"warning\":\"Warning\",\"success\":\"Success\",\"error\":\"Error\",\"confirmDelete\":\"Are you sure you want to delete this item?\"},\"validation\":{\"required\":\"This field is required\",\"email\":\"Please enter a valid email address\",\"minLength\":\"Minimum length is {min} characters\",\"maxLength\":\"Maximum length is {max} characters\",\"pattern\":\"Please match the required format\",\"numeric\":\"Please enter a number\",\"url\":\"Please enter a valid URL\"},\"labels\":{\"search\":\"Search\",\"filter\":\"Filter\",\"sort\":\"Sort\",\"loading\":\"Loading...\",\"error\":\"Error\",\"success\":\"Success\",\"confirm\":\"Confirm\"}},\"contact\":{\"title\":\"Contact Us\",\"submit\":\"Send Message\",\"form\":{\"nameLabel\":\"Name\",\"namePlaceholder\":\"Please enter your name\",\"contactLabel\":\"Contact Information\",\"contactPlaceholder\":\"Phone or email\",\"messageLabel\":\"Message\",\"messagePlaceholder\":\"Please briefly describe your needs\",\"submitButton\":\"Submit Collaboration Request\"}},\"hero\":{\"badge\":\"AI-Powered Solutions\",\"titleLine1\":\"Transform Your\",\"titleLine2\":\"Business with AI\",\"description\":\"Enterprise-grade AI solutions for model deployment, application development, and intelligent agent customization. Scale your business with cutting-edge technology.\",\"cta\":{\"explore\":\"Explore Services\",\"docs\":\"View Documentation\"},\"stats\":{\"clients\":\"Enterprise Clients\",\"uptime\":\"Uptime SLA\",\"support\":\"Expert Support\",\"efficiency\":\"Efficiency Gain\"}},\"theme\":{\"title\":\"Theme\",\"light\":\"Light\",\"dark\":\"Dark\",\"system\":\"System\"},\"cta\":{\"explore\":\"Explore Services\",\"docs\":\"View Documentation\"},\"consultation\":{\"sectionTag\":\"Limited Time Free\",\"sectionTitle\":\"Free AI Application Consultation\",\"sectionDescription\":\"Unsure how to AI-enable your business? Our experts offer a free 30-minute consultation to help you identify scenarios, assess feasibility, and plan implementation\",\"badge\":\"Now Open - Limited Time\",\"valueProps\":{\"free\":\"Free Consultation\",\"response\":\"Response within 2 hours\",\"expert\":\"1-on-1 Expert Advice\",\"noObligation\":\"No Obligations\"},\"form\":{\"title\":\"Book Your Free Consultation\",\"subtitle\":\"Fill in the information below so our consultants can serve you better\",\"nameLabel\":\"Your Name\",\"namePlaceholder\":\"Enter your name\",\"companyLabel\":\"Company Name\",\"companyPlaceholder\":\"Enter company name\",\"phoneLabel\":\"Phone Number\",\"phonePlaceholder\":\"Enter phone number\",\"businessTypeLabel\":\"Business Type\",\"businessTypePlaceholder\":\"Select business type\",\"painPointLabel\":\"Pain Points or Needs\",\"painPointPlaceholder\":\"Briefly describe your business scenario and the problems you want to solve...\",\"submitButton\":\"Book Free Consultation Now\",\"submitting\":\"Submitting...\",\"privacyNotice\":\"By submitting, you agree to our privacy policy. We will not share your information with third parties\"},\"process\":{\"title\":\"Service Process\",\"step1\":{\"title\":\"Submit Request\",\"desc\":\"Fill in basic info, response within 2 hours\"},\"step2\":{\"title\":\"Deep Dive\",\"desc\":\"30-minute 1-on-1 expert consultation\"},\"step3\":{\"title\":\"Solution Delivery\",\"desc\":\"Custom proposal within 3 business days\"},\"step4\":{\"title\":\"Your Decision\",\"desc\":\"Zero pressure, you decide whether to proceed\"}},\"faq\":{\"title\":\"Frequently Asked Questions\",\"q1\":\"What does the free consultation include?\",\"a1\":\"Our free consultation includes: 1) AI feasibility analysis for your business scenario; 2) Technical solution recommendations; 3) ROI estimation; 4) Implementation roadmap. The entire process takes about 30-45 minutes of in-depth discussion.\",\"q2\":\"Am I obligated to purchase services after the consultation?\",\"a2\":\"Absolutely not. The free consultation comes with no strings attached. You can decide whether to work with us based entirely on your own needs. Our goal is to help you clarify your AI application strategy—even if you don't choose us, we hope it's helpful.\",\"q3\":\"What is the background of your consultants?\",\"a3\":\"Our consultants come from well-known tech companies with 5+ years of AI project implementation experience, serving industries including finance, healthcare, manufacturing, and retail—helping 100+ companies complete AI transformation.\",\"q4\":\"How soon will I hear back?\",\"a4\":\"After submitting the form, we'll contact you within 2 business hours to arrange consultant matching. For urgent needs, please note in the remarks and we'll prioritize your request.\"},\"trust\":{\"title\":\"Trusted by 100+ Enterprise Clients\",\"subtitle\":\"Spanning finance, healthcare, manufacturing, retail and more\"},\"success\":{\"title\":\"Booking Successful!\",\"message\":\"Our consultant will contact you within 2 business hours. Please keep your phone available\"}},\"collaboration\":{\"sectionTag\":\"Get In Touch\",\"sectionTitle\":\"Collaborate Now\",\"sectionDescription\":\"Fill out the form or contact us through the following methods, and we will communicate with you as soon as possible\",\"form\":{\"nameLabel\":\"Name\",\"namePlaceholder\":\"Please enter your name\",\"contactLabel\":\"Contact Information\",\"contactPlaceholder\":\"Phone or email\",\"messageLabel\":\"Message\",\"messagePlaceholder\":\"Please briefly describe your needs\",\"submitButton\":\"Submit Collaboration Request\",\"submitting\":\"Submitting...\"},\"submitSuccess\":{\"title\":\"Submission Successful!\",\"message\":\"Thank you for your inquiry, our service consultant will contact you within 1-2 business days\"},\"sendAnother\":\"Send Another Message\",\"toast\":{\"success\":\"Submission Successful!\"},\"contact\":{\"wechat\":\"Scan WeChat QR Code\",\"scanQR\":\"Scan QR code to add on WeChat\",\"email\":\"Send Email\",\"responseTime\":\"We will reply to you within 1-2 business days\"}},\"partners\":{\"title\":\"Technology Partners\",\"description\":\"Establish strategic cooperation with industry-leading enterprises to jointly promote AI technology innovation and application\",\"sectionTag\":\"Our Partners\",\"sectionTitle\":\"Technology Partners\",\"sectionDescription\":\"Developed based on open source frameworks such as LangChain and FastAPI\",\"learnMore\":\"Learn More\",\"joinPartners\":\"Want to become a partner?\",\"contactUs\":\"Contact us\",\"companies\":{\"langchain\":{\"description\":\"Leading large language model application development framework\"},\"fastapi\":{\"description\":\"High-performance API development framework\"},\"dify\":{\"description\":\"Low-code/no-code AI application development platform\"},\"nextjs\":{\"description\":\"SEO-friendly full-stack application development framework\"}}},\"cases\":{\"sectionTag\":\"Success Stories\",\"sectionTitle\":\"Case Studies\",\"sectionDescription\":\"Explore our successfully implemented projects using large model technology\",\"viewDetails\":\"View Details →\",\"studies\":[{\"category\":\"Enterprise Services\",\"title\":\"Intelligent Customer Service System\",\"description\":\"LLM-based intelligent customer service solution increasing satisfaction by 30%\",\"challenge\":\"A large e-commerce enterprise faced high customer service costs, slow response times, and unstable service quality\",\"solution\":\"Deployed private LLM customer service system, enabling 7×24 intelligent responses with multi-turn dialogue and sentiment analysis\",\"results\":[\"Customer satisfaction increased by 30%\",\"Human agent workload reduced by 60%\",\"Average response time reduced from 5 minutes to 10 seconds\",\"Issue resolution rate improved to 92%\"],\"technologies\":[\"GPT-4\",\"RAG\",\"Sentiment Analysis\",\"Knowledge Graph\"]},{\"category\":\"Healthcare\",\"title\":\"Medical Data Analysis Platform\",\"description\":\"AI-powered medical data analysis assisting doctor diagnosis decisions\",\"challenge\":\"A tertiary hospital with over 10,000 daily outpatient visits, doctors under high diagnostic pressure, time-consuming medical records\",\"solution\":\"Built medical AI assistant integrated with EMR system, providing diagnostic suggestions and treatment plan references\",\"results\":[\"Medical record writing efficiency improved 3x\",\"Diagnostic accuracy increased by 15%\",\"Daily patient capacity increased by 25%\",\"Patient waiting time reduced by 40%\"],\"technologies\":[\"Medical NLP\",\"Knowledge Graph\",\"Multimodal Analysis\",\"Privacy Computing\"]},{\"category\":\"FinTech\",\"title\":\"Financial Risk Control System\",\"description\":\"Real-time transaction monitoring with 98% accuracy in anomaly detection\",\"challenge\":\"A bank suffered severe credit card fraud losses, traditional rule-based engines had high false positive rates\",\"solution\":\"AI-powered intelligent risk control system analyzing transaction behavior in real-time, dynamically adjusting risk strategies\",\"results\":[\"Fraud detection accuracy reached 98%\",\"False positive rate reduced by 70%\",\"Risk response time shortened to milliseconds\",\"Annual fraud losses reduced by 80M\"],\"technologies\":[\"Time Series Analysis\",\"Graph Neural Networks\",\"Anomaly Detection\",\"Federated Learning\"]},{\"category\":\"Online Education\",\"title\":\"Educational Content Generation Tool\",\"description\":\"Automatically generate personalized learning content for different learning styles\",\"challenge\":\"Education and training institutions struggled with slow content production, unable to meet personalized teaching needs\",\"solution\":\"AI teaching assistant generating courseware, exercises, and video scripts with one click, supporting multiple difficulty levels\",\"results\":[\"Content production efficiency improved 10x\",\"Course development cycle shortened from 2 weeks to 2 days\",\"Student completion rate increased by 35%\",\"Teacher preparation time saved by 50%\"],\"technologies\":[\"Content Generation\",\"Personalized Recommendation\",\"Knowledge Tracing\",\"Auto Assessment\"]},{\"category\":\"Architecture\",\"title\":\"AI-Assisted Architectural Design Platform\",\"description\":\"Intelligent design generation and optimization for building energy consumption and spatial layout\",\"challenge\":\"An architectural design institute faced long project cycles, frequent design changes, and energy optimization relying on experience\",\"solution\":\"AI architectural design assistant generating multiple scheme comparisons based on requirements, real-time energy consumption calculation\",\"results\":[\"Design cycle shortened by 50%\",\"Building energy consumption reduced by 20% on average\",\"Client satisfaction increased by 45%\",\"Design changes reduced by 60%\"],\"technologies\":[\"Generative Design\",\"BIM Integration\",\"Energy Simulation\",\"Spatial Optimization\"]},{\"category\":\"Smart Manufacturing\",\"title\":\"Industrial Quality Inspection Agent\",\"description\":\"AI vision inspection system for real-time defect detection and early warning\",\"challenge\":\"An auto parts factory had low manual inspection efficiency, high miss rates, and difficult quality traceability\",\"solution\":\"Deployed AI vision quality inspection system, real-time multi-station detection, automatic defect classification\",\"results\":[\"Inspection efficiency improved 8x\",\"Miss rate reduced from 3% to 0.1%\",\"Production line downtime reduced by 40%\",\"Quality traceability time reduced from hours to seconds\"],\"technologies\":[\"Computer Vision\",\"Edge Computing\",\"Digital Twin\",\"Predictive Maintenance\"]},{\"category\":\"Law Firm\",\"title\":\"Legal Document Intelligent Review System\",\"description\":\"Automated contract review and legal research to improve lawyer productivity\",\"challenge\":\"A large law firm faced heavy contract review workload, time-consuming legal research, and scattered knowledge management\",\"solution\":\"Legal AI assistant for intelligent contract clause review, automatic matching of relevant cases and regulations\",\"results\":[\"Contract review efficiency improved 5x\",\"Legal research time reduced by 80%\",\"Contract risk identification accuracy reached 95%\",\"Junior lawyer training cycle shortened by 50%\"],\"technologies\":[\"Legal NLP\",\"Knowledge Graph\",\"Intelligent Retrieval\",\"Document Analysis\"]},{\"category\":\"Accounting\",\"title\":\"Intelligent Audit Analysis Platform\",\"description\":\"AI-driven financial data analysis, automatic identification of abnormal transactions and risks\",\"challenge\":\"Accounting firms had many audit projects, large data processing volumes, limited coverage of manual sampling audits\",\"solution\":\"Intelligent audit system, full data analysis, automatic anomaly flagging, audit recommendation generation\",\"results\":[\"Audit efficiency improved 4x\",\"Abnormal transaction detection rate increased to 96%\",\"Audit coverage from sampling to full-scale\",\"Audit report generation time reduced by 70%\"],\"technologies\":[\"Financial NLP\",\"Anomaly Detection\",\"Data Mining\",\"Intelligent Report Generation\"]}]},\"Store\":{\"title\":\"App Store\",\"description\":\"Explore our AI applications to enhance your productivity and creativity\",\"searchPlaceholder\":\"Search apps...\",\"types\":{\"all\":\"All Types\",\"miniProgram\":\"Mini Program\",\"h5\":\"H5\",\"app\":\"App\"},\"categories\":{\"all\":\"All Categories\",\"tools\":\"Tools\",\"creativity\":\"Creativity\",\"development\":\"Development\",\"business\":\"Business\"},\"noAppsFound\":\"No matching apps found\",\"clearFilters\":\"Clear filters\",\"showingResults\":\"Showing {count} of {total} apps\",\"tryAdjustingFilters\":\"Try adjusting your search or filters\",\"meta\":{\"title\":\"App Store | Metasequoia Studio\",\"description\":\"Explore our AI applications to enhance your productivity and creativity\"}},\"Docs\":{\"loading\":\"Loading document...\",\"meta\":{\"title\":\"Documentation | Metasequoia Studio\",\"description\":\"Metasequoia Studio Documentation Center - Product guides, tutorials and technical reference\"},\"errors\":{\"title\":\"Error\",\"loadFailed\":\"Failed to load document\",\"notFound\":\"Document not found\"},\"search\":{\"placeholder\":\"Search documentation...\",\"noResults\":\"No matching documents found\",\"tryDifferent\":\"Try different keywords\"},\"categories\":{\"all\":\"All\",\"gettingStarted\":\"Getting Started\",\"technical\":\"Technical Docs\",\"help\":\"Help\"}}},\"now\":\"$undefined\",\"timeZone\":\"UTC\",\"children\":\"$L18\"}]\n"])</script><script>self.__next_f.push([1,"19:I[25554,[\"6752\",\"static/chunks/6752-90baefdcb051c3c1.js\",\"1909\",\"static/chunks/1909-ac3fe94adcf1a95e.js\",\"2346\",\"static/chunks/2346-8f59889a5170c5da.js\",\"1278\",\"static/chunks/1278-1b71cee32080193b.js\",\"1399\",\"static/chunks/1399-c867858dd6d3be69.js\",\"8450\",\"static/chunks/app/%5Blocale%5D/layout-41f8cce3b90dae17.js\"],\"default\"]\n1a:I[821,[\"6752\",\"static/chunks/6752-90baefdcb051c3c1.js\",\"1909\",\"static/chunks/1909-ac3fe94adcf1a95e.js\",\"2346\",\"static/chunks/2346-8f59889a5170c5da.js\",\"1278\",\"static/chunks/1278-1b71cee32080193b.js\",\"1399\",\"static/chunks/1399-c867858dd6d3be69.js\",\"8450\",\"static/chunks/app/%5Blocale%5D/layout-41f8cce3b90dae17.js\"],\"default\"]\n18:[\"$\",\"div\",null,{\"className\":\"flex flex-col min-h-screen\",\"children\":[[\"$\",\"$L19\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-grow\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"$L1a\",null,{}]]}]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"1b:I[82435,[],\"IconMark\"]\n"])</script><script>self.__next_f.push([1,"a:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"模型部署指南 | 文档中心\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"提供主流大模型的本地化部署方案，保障数据安全与隐私，支持自定义微调与性能优化\"}],[\"$\",\"link\",\"2\",{\"rel\":\"canonical\",\"href\":\"/en/docs/model-deployment\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"Metasequoia Studio\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"Providing customers with large model privatization deployment, application development and intelligent agent customization services\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:image\",\"content\":\"http://localhost:3000/favicon.jpg\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:title\",\"content\":\"Metasequoia Studio\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:description\",\"content\":\"Providing customers with large model privatization deployment, application development and intelligent agent customization services\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:image\",\"content\":\"http://localhost:3000/favicon.jpg\"}],[\"$\",\"link\",\"11\",{\"rel\":\"icon\",\"href\":\"/favicon.jpg\"}],[\"$\",\"$L1b\",\"12\",{}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"f:\"$a:metadata\"\n"])</script></body></html>